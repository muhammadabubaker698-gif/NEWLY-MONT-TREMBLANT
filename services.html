<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1, viewport-fit=cover" name="viewport"/>
<title>Services | Montr√©al & Mont‚ÄëTremblant Limo Services</title>
<meta content="Luxury chauffeur service in Mont-Tremblant. Escalade, Suburban, Denali, QX60, Tesla &amp; Sprinter. Minimum 1 hour for hourly bookings. Vehicle minimum fares apply. Call or WhatsApp +1 (438) 320-3733." name="description"/>
<link href="https://monttremblantlimoservices.com/" rel="canonical"/>
<meta property="og:type" content="website" />
<meta property="og:title" content="Mont Tremblant Limo Services | Montr√©al & Mont‚ÄëTremblant Chauffeur" />
<meta property="og:description" content="Luxury chauffeur service for Montr√©al, Mont‚ÄëTremblant, and airport transfers (YUL/YMX). Premium SUVs and Sprinter. Book 24/7." />
<meta property="og:url" content="https://monttremblantlimoservices.com/" />
<meta property="og:image" content="https://monttremblantlimoservices.com/Tremblant.jpg" />
<meta name="twitter:card" content="summary_large_image" />
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&amp;display=swap" rel="stylesheet"/>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "LocalBusiness",
  "name": "Mont Tremblant Limo Services",
  "url": "https://monttremblantlimoservices.com/",
  "telephone": "+1-438-320-3733",
  "description": "Luxury chauffeur service in Mont-Tremblant. Premium vehicles for airport transfers, hourly bookings, ski trips, corporate travel, and special events. Minimum 1 hour for hourly bookings. Vehicle minimum fares apply.",
  "areaServed": [
    {
      "@type": "City",
      "name": "Montr√©al"
    },
    {
      "@type": "City",
      "name": "Laval"
    },
    {
      "@type": "City",
      "name": "Longueuil"
    },
    {
      "@type": "City",
      "name": "Brossard"
    },
    {
      "@type": "City",
      "name": "Mont-Tremblant"
    },
    {
      "@type": "AdministrativeArea",
      "name": "Laurentides"
    },
    {
      "@type": "Airport",
      "name": "Montr√©al‚ÄìTrudeau International Airport (YUL)"
    },
    {
      "@type": "Airport",
      "name": "Montr√©al‚ÄìMirabel International Airport (YMX)"
    },
    {
      "@type": "City",
      "name": "Ottawa"
    },
    {
      "@type": "City",
      "name": "Qu√©bec City"
    }
  ],
  "address": {
    "@type": "PostalAddress",
    "addressLocality": "Montr√©al",
    "addressRegion": "QC",
    "addressCountry": "CA"
  },
  "image": [
    "https://monttremblantlimoservices.com/Tremblant.jpg"
  ],
  "sameAs": [
    "https://wa.me/14383203733"
  ],
  "email": "info@monttremblantlimoservices.com",
  "priceRange": "$$$"
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "Do you offer Montr√©al airport pickups (YUL)?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes ‚Äî we provide private airport transfers from Montr√©al‚ÄìTrudeau (YUL). Share your flight number and pickup details."
      }
    },
    {
      "@type": "Question",
      "name": "Can I book hourly service in Montr√©al?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes ‚Äî choose ‚ÄúBy the hour‚Äù (minimum 1 hour). Vehicle minimums may apply."
      }
    },
    {
      "@type": "Question",
      "name": "Do you serve Mont‚ÄëTremblant year‚Äëround?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes ‚Äî we offer transfers and hourly chauffeur service in Mont‚ÄëTremblant all year (ski season, summer events, and more)."
      }
    },
    {
      "@type": "Question",
      "name": "How do I pay?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "After you submit your request, we confirm availability and send a secure Stripe payment link."
      }
    }
  ]
}
</script>

<style>
    :root{
  --bg:#f6f7f9;
  --ink:#0b1220;
  --muted: rgba(11,18,32,.65);
  --line: rgba(11,18,32,.08);
  --shadow: 0 22px 70px rgba(0,0,0,.08);
  --shadow2: 0 14px 34px rgba(0,0,0,.06);
  --radius: 18px;
  --max: 1160px;

  /* luxury gold accent */
  --gradA:#c8a24a;
  --gradB:#f2d07a;

  --good:#16a34a;
  --bad:#dc2626;

  --flowbar-h: 180px;
  --vh: 100vh;
}

*{box-sizing:border-box;margin:0;padding:0}
  html{scroll-behavior:smooth}
  body{
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    background:#f6f7f9;
    color: var(--ink);
    line-height: 1.6;
    font-size: 16px;
    overflow-x:hidden;
  }

  html, body{ width:100%; max-width:100%; overflow-x:hidden; }
  img, video, canvas, svg{ max-width:100%; height:auto; }

  a{color:inherit;text-decoration:none}
  .container{max-width:var(--max);margin:0 auto;padding: 0 18px}
  section{ scroll-margin-top: 96px; }
  main{padding-bottom: 64px}

  header{
    position: sticky;
    top:0;
    z-index:50;
    background:#ffffff;
    backdrop-filter: blur(14px);
    border-bottom: 1px solid var(--line);
  }
  .nav{
    height: 76px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:14px;
  }
  .brand{
    display:flex;
    align-items:center;
    gap:12px;
    font-weight: 950;
    letter-spacing: .4px;
  }
  .logo{
    width: 38px; height: 38px;
    border-radius: 12px;
    background: #0b1220;
    color:#0b0b0b;
    display:grid;
    place-items:center;
    font-weight: 950;
  }
  .links{
    display:flex;
    align-items:center;
    gap: 12px;
    flex-wrap:wrap;
    justify-content:center;
  }
  .links a{
    color: rgba(11,18,32,.78);
    font-weight: 800;
    font-size: 14px;
    padding: 10px 10px;
    border-radius: 12px;
    transition: .15s ease;
  }
  .links a:hover{ background: rgba(11,18,32,.06); color: rgba(11,18,32,.92); }

  .header-actions{
    display:flex;
    gap:10px;
    align-items:center;
  }
  .pill{
    display:none;
    font-size: 13px;
    color: rgba(11,18,32,.75);
    font-weight: 800;
    padding: 10px 12px;
    border-radius: 999px;
    border: 1px solid rgba(11,18,32,.12);
    background:#ffffff;
    white-space:nowrap;
  }

  .btn{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    gap:10px;
    padding: 11px 16px;
    border-radius: 999px;
    font-weight: 900;
    border: 1px solid rgba(11,18,32,.14);
    background:#ffffff;
    box-shadow: var(--shadow2);
    color: rgba(11,18,32,.92);
    transition: transform .15s ease, box-shadow .15s ease;
    cursor:pointer;
    white-space:nowrap;
  }
  .btn:hover{ transform: translateY(-1px); box-shadow: 0 16px 34px rgba(0,0,0,.12); }
  .btn-primary{
    border: none;
    color:#0b0b0b;
    background: linear-gradient(90deg, var(--gradA), var(--gradB));
    box-shadow: 0 18px 44px rgba(200,162,74,.22);
  }

  .hero-wrap{
    position:relative;
    border-bottom: 1px solid var(--line);
    background:
      linear-gradient(90deg, rgba(255,255,255,.95) 0%, rgba(255,255,255,.90) 45%, rgba(7,10,15,0) 72%),
      linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,.45)),
      url("/Tremblant.jpg") center/cover no-repeat;
  }
  .hero-inner{
    display:grid;
    grid-template-columns: 1.25fr .75fr;
    align-items: start;
    gap: 22px;
    padding: 26px 0 34px;
    min-height: 520px;
  }
  .hero-left{ padding: 0 18px; }
  .hero-title{
    font-size: clamp(34px, 4vw, 58px);
    line-height: 1.05;
    letter-spacing: -0.6px;
    font-weight: 950;
    color:#0b1220;
    max-width: 18ch;
    margin-top: 24px;
  }
  .hero-sub{
    margin-top: 12px;
    color: rgba(11,18,32,.74);
    font-size: 17px;
    max-width: 68ch;
    font-weight: 700;
  }
  .hero-badges{
    margin-top: 18px;
    display:flex;
    flex-wrap:wrap;
    gap: 10px;
  }
  .badge{
    padding: 9px 12px;
    border-radius: 999px;
    background: rgba(255,255,255,.75);
    border: 1px solid rgba(11,18,32,.10);
    color: rgba(11,18,32,.75);
    font-weight: 900;
    font-size: 13px;
    box-shadow: 0 10px 20px rgba(0,0,0,.06);
  }

  .booking-card{
    margin-right: 18px;
    justify-self:end;
    width: min(430px, 100%);
    border-radius: 14px;
    background:#ffffff;
    box-shadow: 0 28px 70px rgba(0,0,0,.24);
    border: 1px solid rgba(11,18,32,.10);
    overflow:hidden;
  }
  .tabs{
    display:flex;
    background:#ffffff;
    border-bottom: 1px solid rgba(11,18,32,.08);
  }
  .tabhint{margin-top:10px; font-size:13px; color: rgba(11,18,32,.72); line-height:1.35;}
  .tabhint b{color: rgba(11,18,32,.92);} 
  .tab{
    flex:1;
    padding: 14px 14px;
    font-weight: 950;
    font-size: 14px;
    color: rgba(11,18,32,.78);
    background:#ffffff;
    border:none;
    cursor:pointer;
  }
  .tab.active{
    background:#ffffff;
    color: rgba(11,18,32,.94);
  }

  .book-body{ padding: 14px; background:#ffffff; }

  .stepbar{
    display:flex;
    gap: 8px;
    align-items:center;
    justify-content:space-between;
    margin: 6px 0 12px;
  }
  .stepdot{
    flex: 1;
    height: 6px;
    border-radius: 999px;
    background: rgba(11,18,32,.10);
    overflow:hidden;
    position:relative;
  }
  .stepdot > i{
    position:absolute; inset:0;
    width: 33%;
    background: linear-gradient(90deg, var(--gradA), var(--gradB));
    border-radius: 999px;
  }
  .steptext{
    font-size: 12.5px;
    color: rgba(11,18,32,.65);
    font-weight: 900;
    white-space:nowrap;
    margin-left: 10px;
  }

  .field{
    display:flex;
    align-items:center;
    gap: 10px;
    padding: 12px 12px;
    border-radius: 10px;
    border: 1px solid rgba(11,18,32,.10);
    background:#ffffff;
    margin-bottom: 10px;
    min-width: 0;
  }
  .ico{ width: 18px; height: 18px; color: rgba(11,18,32,.55); flex:0 0 auto; }
  .field input, .field select{
    width:100%;
    border:none;
    outline:none;
    background: transparent;
    font-size: 16px;
    font-weight: 800;
    color: rgba(11,18,32,.90);
    min-width: 0;
  }
  .field input::placeholder{ color: rgba(11,18,32,.50); font-weight:800; }

  /* ‚úÖ Autocomplete UI */
  .autocomplete-wrap{ position:relative; }
  .autocomplete-list{
    position:absolute;
    top: calc(100% - 8px);
    left:0;
    right:0;
    z-index:30;
    background:#ffffff;
    border:1px solid rgba(11,18,32,.12);
    border-radius: 12px;
    box-shadow: 0 16px 28px rgba(0,0,0,.12);
    display:none;
    max-height: 220px;
    overflow:auto;
  }
  .autocomplete-list button{
    width:100%;
    border:none;
    border-top:1px solid rgba(11,18,32,.08);
    background:#ffffff;
    text-align:left;
    padding: 10px 12px;
    font-size: 14px;
    font-weight:700;
    color: rgba(11,18,32,.84);
    cursor:pointer;
  }
  .autocomplete-list button:first-child{ border-top:none; }
  .autocomplete-list button:hover{ background: rgba(11,18,32,.04); }
  .autocomplete-list .muted{ color: rgba(11,18,32,.55); font-size:12px; display:block; margin-top:2px; }

  .row2{ display:grid; grid-template-columns: 1fr 1fr; gap: 10px; }
  .note{ margin: 8px 4px 10px; color: rgba(11,18,32,.62); font-size: 12.8px; font-weight: 800; }

  .search-btn{
    width:100%;
    border:none;
    border-radius: 10px;
    padding: 13px 14px;
    font-weight: 950;
    font-size: 15px;
    color: #fff;
    background: linear-gradient(90deg, var(--gradA), var(--gradB));
    cursor:pointer;
    box-shadow: 0 18px 44px rgba(255,90,20,.22);
  }
  .search-btn[disabled]{ opacity:.65; cursor:not-allowed; box-shadow:none; }

  .alert{
    display:none;
    margin-top: 10px;
    padding: 10px 12px;
    border-radius: 12px;
    border: 1px solid rgba(11,18,32,.12);
    background:#ffffff;
    font-weight: 850;
    font-size: 13px;
  }
  .alert.bad{ border-color: rgba(176,0,32,.25); background: rgba(176,0,32,.06); color: var(--bad); }

  .overlay{
    position: fixed;
    inset: 0;
    z-index: 99999;
    background:#ffffff;
    display: none;
    overflow: hidden;
    overscroll-behavior: contain;
  }
  .overlay.show{ display: block; }

  .overlay-top{
    height: 76px;
    border-bottom: 1px solid rgba(11,18,32,.10);
    background:#ffffff;
    backdrop-filter: blur(14px);
    display:flex;
    align-items:center;
  }
  .overlay-top .container{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap: 12px;
    width: 100%;
  }
  .overlay-title{
    font-weight: 950;
    letter-spacing: .2px;
  }
  .overlay-close{
    border: 1px solid rgba(11,18,32,.14);
    background:#ffffff;
    border-radius: 12px;
    padding: 10px 12px;
    font-weight: 900;
    cursor: pointer;
  }

  .overlay-body{
    height: calc(var(--vh) - 76px);
    height: calc(-webkit-fill-available - 76px);
    overflow-y: auto;
    overflow-x: hidden;
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
    padding: 26px 0 calc(var(--flowbar-h) + env(safe-area-inset-bottom) + 16px);
    touch-action: pan-y;
  }

  .flow-wrap{
    max-width: 760px;
    width: 100%;
    margin: 0 auto;
    padding: 0 18px;
    display: flex;
    flex-direction: column;
    min-height: 0;
  }

  .flow-steps{
    display:flex;
    gap: 18px;
    align-items:center;
    justify-content:center;
    color: rgba(11,18,32,.55);
    font-weight: 900;
    font-size: 13px;
    margin-bottom: 14px;
    flex-wrap: wrap;
    text-align:center;
  }
  .flow-steps .on{ color: rgba(11,18,32,.92); }

  .summary-pill{
    border: 1px solid rgba(11,18,32,.12);
    border-radius: 16px;
    background:#ffffff;
    padding: 14px 16px;
    font-weight: 800;
    color: rgba(11,18,32,.82);
  }
  .summary-pill small{
    display:block;
    color: rgba(11,18,32,.62);
    font-weight: 800;
    margin-top: 4px;
  }

  .flow-h1{
    margin-top: 18px;
    font-size: 28px;
    line-height: 1.15;
    letter-spacing: -.2px;
    font-weight: 950;
  }
  .flow-sub{
    margin-top: 8px;
    color: rgba(11,18,32,.66);
    font-weight: 750;
  }

  .vlist{
    margin-top: 16px;
    border: 1px solid rgba(11,18,32,.12);
    border-radius: 16px;
    overflow: hidden;
    background:#ffffff;
  }

  .vrow{
    position: relative;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap: 14px;
    padding: 14px 14px;
    border-top: 1px solid rgba(11,18,32,.10);
    cursor: pointer;
    transition: transform .12s ease, padding .12s ease, background .12s ease;
    min-width: 0;
  }
  .vrow:first-child{ border-top: none; }
  .vrow:hover{ background: rgba(11,18,32,.03); }

  .vcheck{
    position:absolute;
    right: 16px;
    top: 14px;
    width: 22px;
    height: 22px;
    border-radius: 999px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size: 13px;
    font-weight: 950;
    color: #fff;
    background: linear-gradient(90deg, var(--gradA), var(--gradB));
    box-shadow: 0 10px 18px rgba(255,90,20,.20);
    opacity: 0;
    transform: scale(.92);
    transition: opacity .12s ease, transform .12s ease;
    pointer-events:none;
  }

  .vrow.selected{
    background: rgba(255,90,20,.06);
    padding-top: 18px;
    padding-bottom: 18px;
    transform: translateY(-1px);
    z-index: 2;
  }
  .vrow.selected .vcheck{ opacity: 1; transform: scale(1); }
  .vrow.selected::after{
    content:"";
    position:absolute;
    inset: 6px;
    border-radius: 14px;
    border: 2px solid rgba(255,90,20,.55);
    pointer-events:none;
  }
  .vrow.hide-top-border{ border-top-color: transparent; }

  .vleft, .vright{ min-width:0; }
  .vleft b{ display:block; font-weight: 950; word-break: break-word; }
  .vleft small{ display:block; margin-top: 2px; color: rgba(11,18,32,.62); font-weight: 800; }
  .vright{
    text-align:right;
    font-weight: 950;
    white-space: nowrap;
    padding-right: 26px;
  }

  .veh-img{
    width: 96px;
    height: 60px;
    object-fit: cover;
    border-radius: 10px;
    border: 1px solid rgba(0,0,0,.08);
    flex: 0 0 auto;
    background:#ffffff;
  }

  .flow-actions{
    margin-top: 18px;
    position: sticky;
    bottom: 0;
    z-index: 5;
    background:#ffffff;
    backdrop-filter: blur(8px);
    border-top: 1px solid rgba(11,18,32,.10);
    padding: 12px 0 calc(12px + env(safe-area-inset-bottom));
    display:flex;
    gap: 12px;
    justify-content: space-between;
    flex-wrap: wrap;
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    will-change: transform;
  }

  .flow-actions .btn{
    border-radius: 14px;
    padding: 12px 14px;
    box-shadow:none;
  }
  .flow-actions .btn-primary{
    border: none;
    color:#0b0b0b;
    background: linear-gradient(90deg, var(--gradA), var(--gradB));
    box-shadow: 0 18px 44px rgba(200,162,74,.22);
  }
  .btn:disabled{ opacity:.55; cursor:not-allowed; }

  html.overlay-open .whatsapp-float{ display:none !important; }

  label{
    display:block;
    margin: 12px 0 6px;
    font-size: 12.5px;
    font-weight: 900;
    color: rgba(11,18,32,.74);
    letter-spacing: .18px;
  }
  input, select, textarea{
    width:100%;
    padding: 12px 12px;
    border-radius: 12px;
    border: 1px solid rgba(11,18,32,.14);
    background:#ffffff;
    color: rgba(11,18,32,.92);
    outline:none;
    font-weight: 800;
    font-size: 16px;
  }
  textarea{min-height: 92px; resize: vertical}

  .estimate-box{
    margin-top: 12px;
    border-radius: 12px;
    border: 1px solid rgba(11,18,32,.12);
    background:#ffffff;
    padding: 12px;
  }
  .estimate-top{display:flex;justify-content:space-between;gap:10px;align-items:center;flex-wrap:wrap}
  .estimate-top b{font-size:13.5px}
  .estimate-value{font-weight:950}
  .estimate-sub{margin-top:6px;color: rgba(11,18,32,.68);font-size:12.8px;font-weight:700}
  .tinyhint{margin-top:6px;font-size:12.5px;color:rgba(11,18,32,.62);font-weight:700}

  .section{ margin-top: 46px; }
  h2{ font-size: 30px; letter-spacing: -.2px; line-height:1.15; }
  .subtitle{
    margin-top: 10px;
    color: rgba(11,18,32,.66);
    font-weight: 700;
    max-width: 920px;
  }
  .grid3{
    margin-top: 16px;
    display:grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 14px;
  }
  .card{
    border-radius: var(--radius);
    border: 1px solid rgba(11,18,32,.10);
    background:#ffffff;
    box-shadow: 0 14px 36px rgba(0,0,0,.08);
    overflow:hidden;
  }
  .card-media img{width:100%;aspect-ratio: 16/10;object-fit:cover;display:block}
  .card-body{padding: 14px}
  .card-body h3{ font-size: 17px; letter-spacing: -.1px; }
  .meta{ margin-top: 6px; color: rgba(11,18,32,.66); font-weight:700; font-size: 13.5px; }
  .price{ margin-top: 10px; font-weight: 950; }
  .min{ margin-top: 3px; color: rgba(11,18,32,.58); font-weight: 800; font-size: 12.5px; }
  .actions{ margin-top: 12px; display:flex; gap:10px; flex-wrap:wrap; }
  .actions .btn{ box-shadow:none; }
  .actions-reserve .btn{ font-size: 13.5px; padding: 10px 14px; }
  .btn-whatsapp{
    border: none;
    color: #fff;
    background: linear-gradient(90deg, #22c55e, #16a34a);
    box-shadow: 0 16px 34px rgba(34,197,94,.22);
  }

  .selected-vehicle{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
    padding: 10px 12px;
    border-radius: 12px;
    border: 1px solid rgba(11,18,32,.12);
    background:#ffffff;
    font-size: 13px;
    font-weight: 800;
    color: rgba(11,18,32,.8);
  }
  .selected-vehicle-info{
    display:flex;
    align-items:center;
    gap:10px;
    min-width: 0;
  }
  .selected-vehicle-info img{
    width: 44px;
    height: 32px;
    object-fit: cover;
    border-radius: 8px;
    border: 1px solid rgba(11,18,32,.12);
    background:#ffffff;
    flex: 0 0 auto;
  }
  .selected-vehicle button{
    border: 1px solid rgba(11,18,32,.16);
    background:#ffffff;
    border-radius: 999px;
    padding: 6px 12px;
    font-weight: 800;
    cursor:pointer;
  }

  footer{
    margin-top: 64px;
    padding: 26px 0;
    text-align:center;
    color: rgba(11,18,32,.62);
    border-top: 1px solid rgba(11,18,32,.10);
    font-weight: 700;
  }

  .whatsapp-float{
    position:fixed;
    right: 96px;
    bottom: 16px;
    background:#25D366;
    color:#0b0b0b;
    padding: 12px 16px;
    border-radius: 999px;
    font-weight: 950;
    box-shadow: 0 16px 38px rgba(0,0,0,.16);
    z-index:60;
    border: 1px solid rgba(0,0,0,.14);
  }

  @media (max-width: 680px){
    .overlay-top .container{ padding-left: 12px; padding-right: 12px; }
    .overlay-title{ font-size: 14px; }
    .overlay-close{ padding: 9px 10px; border-radius: 12px; }

    .vrow{
      display: grid;
      grid-template-columns: 76px 1fr auto;
      align-items: center;
      gap: 12px;
    }
    .veh-img{
      width: 76px;
      height: 52px;
      border-radius: 12px;
    }
    .vright{
      padding-right: 18px;
      text-align: right;
    }
    .vleft b{ font-size: 15px; line-height: 1.2; }
    .vleft small{ font-size: 12.5px; }

    .flow-actions{
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      margin-top: 0;
      padding: 12px 16px calc(12px + env(safe-area-inset-bottom));
      z-index: 999999;
    }

    .flow-actions .btn{
      flex: 1 1 auto;
      min-width: 140px;
    }
  }

  @media (max-width: 980px){
    .hero-inner{ grid-template-columns: 1fr; }
    .booking-card{ justify-self:stretch; margin: 14px 18px 0; width:auto; }
    .grid3{ grid-template-columns: 1fr; }
    .row2{ grid-template-columns: 1fr; }
  }
  @media (max-width: 860px){
    .links{ display:none; }
    .pill{ display:inline-flex; }
    .header-actions .btn{ display:none; }
  }

/* Google map preview */
.gmap{
  width:100%;
  height:220px;
  border-radius:16px;
  overflow:hidden;
  background:#ffffff;
  margin:12px 0 10px;
}
@media (max-width: 520px){
  .gmap{ height:200px; }
}


/* Google Places dropdown */
.pac-container{z-index:999999 !important;}

/* Route summary */
.route-info{
  margin-top:10px;
  padding:10px 12px;
  border:1px solid rgba(0,0,0,.08);
  border-radius:14px;
  background: rgba(255,255,255,.88);
  backdrop-filter: blur(6px);
}
.route-info .ri-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  font-size:14px;
  line-height:1.25;
  padding:4px 0;
}
.route-info .ri-row span{ color:#6b7280; }
.route-info .ri-row strong{ font-weight:700; color:#111827; }
.route-info .ri-badges{ display:flex; flex-wrap:wrap; gap:6px; margin-top:8px; }
.route-info .ri-badge{
  display:inline-flex; align-items:center; gap:6px;
  font-size:12px; font-weight:600;
  padding:6px 10px;
  border-radius:999px;
  border:1px solid rgba(0,0,0,.08);
  background:#ffffff;
}

/* Mobile keyboard UX: avoid iOS zoom + better keyboard */
#h_pickup, #h_dropoff{
  font-size:16px; /* prevents iOS zoom */
}

/* Language switch */
.lang-switch{
  display:flex;
  gap:6px;
  align-items:center;
  padding:6px;
  border-radius:999px;
  border:1px solid rgba(11,18,32,.14);
  background:#ffffff;
}
.lang-btn{
  border:none;
  border-radius:999px;
  padding:8px 10px;
  font-weight:900;
  cursor:pointer;
  background: transparent;
  color: rgba(11,18,32,.80);
}
.lang-btn.active{
  background: rgba(11,18,32,.10);
  color: rgba(11,18,32,.92);
}

/* Contact section */
.contact-grid{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 14px;
  margin-top: 16px;
}
.contact-card{
  border: 1px solid rgba(11,18,32,.10);
  border-radius: 16px;
  background:#ffffff;
  box-shadow: 0 14px 36px rgba(0,0,0,.08);
  padding: 16px;
}
.contact-card h3{ font-size: 17px; letter-spacing: -.1px; }
.contact-card p{ margin-top: 10px; color: rgba(11,18,32,.74); font-weight: 750; }
.contact-card input, .contact-card textarea{
  margin-top: 10px;
}
.contact-map iframe{
  width:100%;
  height: 320px;
  border: 0;
  border-radius: 16px;
  margin-top: 14px;
}

/* Footer columns */
.footer-grid{
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 18px;
  text-align:left;
}
footer a:hover{ text-decoration: underline; }

/* Sticky contact bar */
.contact-bar{
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 99998;
  background: rgba(11,18,32,.94);
  backdrop-filter: blur(14px);
  border-top: 1px solid rgba(255,255,255,.14);
  padding: 10px 12px calc(10px + env(safe-area-inset-bottom));
  display:flex;
  gap: 10px;
  justify-content: center;
}
.contact-bar a{
  color:#0b0b0b;
  font-weight: 900;
  text-decoration:none;
  border: 1px solid rgba(255,255,255,.18);
  padding: 10px 14px;
  border-radius: 999px;
  background: rgba(255,255,255,.08);
}

/* Make room for contact bar on desktop */
body{ padding-bottom: 64px; }

@media (max-width: 700px){
  .contact-grid{ grid-template-columns: 1fr; }
  .footer-grid{ grid-template-columns: 1fr; text-align:center; }
  .contact-bar{ justify-content: space-around; }
}

/* Routes / Areas / FAQ */
.routes-grid{
  margin-top:16px;
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap:14px;
}
.route-card{
  border-radius: var(--radius);
  border: 1px solid rgba(11,18,32,.10);
  background:#ffffff;
  box-shadow: 0 14px 36px rgba(0,0,0,.08);
  padding:16px;
}
.route-card h3{ font-size:17px; letter-spacing:-.1px; }
.route-card p{ margin-top:6px; color: rgba(11,18,32,.66); font-weight:700; font-size:13.5px; }
.route-card .btn{ margin-top:12px; box-shadow:none; }

.areas-grid{
  margin-top:16px;
  display:grid;
  grid-template-columns: repeat(3, minmax(0,1fr));
  gap:14px;
}
.area-card{
  border-radius: var(--radius);
  border: 1px solid rgba(11,18,32,.10);
  background:#ffffff;
  box-shadow: 0 14px 36px rgba(0,0,0,.08);
  padding:16px;
}
.area-card h3{ font-size:17px; letter-spacing:-.1px; }
.area-card p{ margin-top:6px; color: rgba(11,18,32,.66); font-weight:700; font-size:13.5px; }

.faq{ margin-top:14px; display:flex; flex-direction:column; gap:10px; }
.faq-item{
  border: 1px solid rgba(11,18,32,.12);
  border-radius: 16px;
  background:#ffffff;
  overflow:hidden;
}
.faq-item summary{
  padding: 14px 16px;
  font-weight: 900;
  cursor:pointer;
  list-style:none;
}
.faq-item summary::-webkit-details-marker{ display:none; }
.faq-a{
  padding: 0 16px 14px;
  color: rgba(11,18,32,.72);
  font-weight: 750;
}

@media (max-width: 980px){
  .routes-grid, .areas-grid{ grid-template-columns: 1fr; }
}


/* Services page layout tweaks */
.page-services .booking-card{ display:none !important; }
.page-services .hero-inner{ grid-template-columns: 1fr; min-height: 360px; }
.page-services .hero-left{ padding: 0 18px; }
.page-services .hero-title{ max-width: 26ch; }
.page-services .hero-sub{ max-width: 80ch; }
.service-grid{
  margin-top: 16px;
  display:grid;
  grid-template-columns: repeat(3, minmax(0,1fr));
  gap: 14px;
}
@media (max-width: 980px){ .service-grid{ grid-template-columns: 1fr; } }
.service-card{
  border-radius: var(--radius);
  border: 1px solid rgba(11,18,32,.10);
  background:#ffffff;
  box-shadow: 0 14px 36px rgba(0,0,0,.08);
  padding: 16px;
}
.service-card h3{ font-size: 17px; letter-spacing: -.1px; }
.service-card p{ margin-top: 6px; color: rgba(11,18,32,.66); font-weight:700; font-size: 13.5px; }
.service-cta{ margin-top: 12px; display:flex; gap:10px; flex-wrap:wrap; }
.service-cta .btn{ box-shadow:none; }


/* ===== Ultra Luxury Upgrade ===== */
:root{
  --paper:#f6f7f9;
  --card:#ffffff;
  --glass: rgba(255,255,255,.72);
  --glass2: rgba(255,255,255,.58);
  --ink:#0b1220;
  --muted: rgba(11,18,32,.62);
  --line: rgba(11,18,32,.08);
  --shadow: 0 26px 80px rgba(0,0,0,.10);
  --shadow2: 0 18px 44px rgba(0,0,0,.08);
  --radius: 18px;
  --max: 1160px;

  --goldA:#b58a2b;
  --goldB:#f2d07a;
  --goldC:#fff2c4;

  --accent: linear-gradient(90deg, var(--goldA), var(--goldB));
}

body{
  background:
    radial-gradient(1200px 700px at 10% -10%, rgba(242,208,122,.35), transparent 55%),
    radial-gradient(900px 600px at 90% 0%, rgba(181,138,43,.18), transparent 60%),
    radial-gradient(900px 600px at 60% 115%, rgba(11,18,32,.06), transparent 55%),
    var(--paper);
}

h1,h2,.hero-title{
  font-family: "Playfair Display", ui-serif, Georgia, serif;
  letter-spacing: -0.6px;
}

.brand, .btn, .badge, .tab, .links a{
  letter-spacing: .2px;
}

header{
  background: rgba(255,255,255,.78);
  backdrop-filter: blur(18px);
  border-bottom: 1px solid var(--line);
}

.logo{
  background: linear-gradient(180deg, #0b1220, #111a2c);
  border: 1px solid rgba(255,255,255,.08);
  box-shadow: 0 18px 50px rgba(0,0,0,.18);
}

.hero-wrap{
  position:relative;
  background:
    linear-gradient(90deg, rgba(246,247,249,.88) 0%, rgba(246,247,249,.55) 45%, rgba(246,247,249,0) 72%),
    linear-gradient(180deg, rgba(0,0,0,.00), rgba(0,0,0,.10)),
    url("/Tremblant.jpg") center/cover no-repeat;
}
.hero-wrap::after{
  content:"";
  position:absolute; inset:0;
  background: radial-gradient(700px 420px at 22% 32%, rgba(242,208,122,.20), transparent 55%);
  pointer-events:none;
}
.hero-inner{ position:relative; z-index:1; }

.badge{
  background: rgba(255,255,255,.72);
  border: 1px solid rgba(11,18,32,.10);
  box-shadow: 0 12px 24px rgba(0,0,0,.06);
}

.card{
  background: var(--card);
  border: 1px solid rgba(11,18,32,.08);
  box-shadow: var(--shadow2);
}

.booking-card{
  background: rgba(255,255,255,.82);
  backdrop-filter: blur(18px);
  border: 1px solid rgba(11,18,32,.10);
  box-shadow: 0 34px 90px rgba(0,0,0,.18);
}

.field, input, select, textarea{
  background: rgba(11,18,32,.04);
  border-color: rgba(11,18,32,.10);
}

.btn{
  transition: transform .18s ease, box-shadow .18s ease, background .18s ease;
}
.btn:hover{
  transform: translateY(-2px);
  box-shadow: 0 18px 44px rgba(0,0,0,.10);
}

.btn-primary{
  border:none;
  color:#0b0b0b;
  background: var(--accent);
  box-shadow: 0 22px 56px rgba(181,138,43,.18);
}
.btn-primary:hover{
  box-shadow: 0 28px 70px rgba(181,138,43,.22);
}

/* subtle shine */
.btn-primary{
  position:relative;
  overflow:hidden;
}
.btn-primary::after{
  content:"";
  position:absolute;
  top:-80%;
  left:-40%;
  width:60%;
  height:240%;
  transform: rotate(20deg);
  background: linear-gradient(90deg, transparent, rgba(255,255,255,.55), transparent);
  opacity:.0;
}
.btn-primary:hover::after{
  animation: shine 1.15s ease;
}
@keyframes shine{
  0%{ transform: translateX(-40%) rotate(20deg); opacity:0; }
  20%{ opacity:.55; }
  100%{ transform: translateX(220%) rotate(20deg); opacity:0; }
}

/* section reveal */
.reveal{
  opacity:0;
  transform: translateY(12px);
  transition: opacity .7s ease, transform .7s ease;
}
.reveal.on{
  opacity:1;
  transform: translateY(0);
}

/* Floating Book button */
.float-book{
  position:fixed;
  right: 16px;
  bottom: 88px;
  z-index: 9999;
  display:inline-flex;
  align-items:center;
  gap:10px;
  padding: 12px 14px;
  border-radius: 999px;
  background: var(--accent);
  color:#0b0b0b;
  font-weight: 950;
  box-shadow: 0 22px 56px rgba(181,138,43,.20);
  border: 1px solid rgba(11,18,32,.12);
}
.float-book:hover{ transform: translateY(-2px); }

@media (max-width: 680px){
  .float-book{ bottom: 104px; }
}


/* ===== Ultra Luxury v2 (Monogram + Private Aviation UI) ===== */

/* Floating monogram button */
.float-book{
  padding: 10px 14px 10px 10px;
}
.float-book .mono{
  width:34px; height:34px;
  display:inline-grid;
  place-items:center;
  border-radius: 999px;
  background: linear-gradient(180deg, rgba(11,18,32,.90), rgba(11,18,32,.70));
  color: var(--goldC);
  font-weight: 950;
  letter-spacing: .6px;
  border: 1px solid rgba(255,255,255,.14);
  box-shadow: 0 14px 34px rgba(0,0,0,.18);
}
.float-book .label{
  font-weight: 950;
}

/* Booking widget: private aviation feel */
.booking-card{
  border-radius: 22px;
  overflow: hidden;
}
.booking-card .tabs{
  display:flex;
  gap:8px;
  padding: 10px;
  background: rgba(11,18,32,.03);
  border-bottom: 1px solid rgba(11,18,32,.08);
}
.booking-card .tab{
  flex:1;
  text-align:center;
  padding: 12px 10px;
  border-radius: 999px;
  font-weight: 900;
  background: rgba(255,255,255,.65);
  border: 1px solid rgba(11,18,32,.10);
  box-shadow: 0 10px 20px rgba(0,0,0,.05);
}
.booking-card .tab.active{
  background: linear-gradient(90deg, rgba(181,138,43,.16), rgba(242,208,122,.28));
  border-color: rgba(181,138,43,.22);
}

/* Aviation-style progress bar */
.booking-card .progress{
  height: 10px;
  border-radius: 999px;
  background: rgba(11,18,32,.08);
  overflow:hidden;
}
.booking-card .progress > span{
  display:block;
  height:100%;
  width:0%;
  background: linear-gradient(90deg, var(--goldA), var(--goldB));
  border-radius: 999px;
}

/* Fields */
.booking-card .field{
  border-radius: 14px;
  background: rgba(255,255,255,.70);
  border: 1px solid rgba(11,18,32,.10);
  box-shadow: 0 10px 22px rgba(0,0,0,.05);
}
.booking-card input,
.booking-card select,
.booking-card textarea{
  background: transparent;
  border: none;
  outline: none;
}

/* Summary / price panel (if present) */
.booking-card .summary{
  border-radius: 16px;
  background: rgba(11,18,32,.03);
  border: 1px solid rgba(11,18,32,.08);
  padding: 12px;
}


/* Booking readability (mobile) */
.tabhint{
  padding: 12px 14px;
  line-height: 1.45;
  border-radius: 14px;
  background: rgba(11,18,32,.03);
  border: 1px solid rgba(11,18,32,.08);
}
@media (max-width: 520px){
  .booking-card{ padding: 14px !important; }
  .tabhint{ padding: 14px 16px; }
}


/* Bottom contact bar: gold buttons */
.contact-bar{
  background: rgba(11,18,32,.80);
  backdrop-filter: blur(10px);
}
.contact-bar a{
  background: linear-gradient(90deg, var(--goldA), var(--goldB));
  color: #0b0b0b !important;
  border: 1px solid rgba(255,255,255,.16);
  border-radius: 999px;
  padding: 10px 14px;
  box-shadow: 0 16px 34px rgba(181,138,43,.20);
}
.contact-bar a:hover{ transform: translateY(-1px); }


/* hide big book button on top row on mobile */
}

/* Desktop: keep clean one-line header */
@media (min-width: 941px){
  header .nav{
    display:grid;
    grid-template-columns: auto 1fr auto;
    align-items:center;
  }
  header .links{
    justify-self:center;
    display:flex !important;
    flex-direction: row !important;
    position: static !important;
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    padding: 0 !important;
    gap: 22px !important;
  }
  header .links a{
    background: transparent !important;
    border: none !important;
    padding: 10px 2px !important;
    font-weight: 900;
    text-transform: uppercase;
    font-size: 12px;
    letter-spacing: 1.1px;
    color: rgba(11,18,32,.78);
  }
  header .links a:hover{ color: rgba(11,18,32,.95); }
  header .menu-toggle{ display:none !important; }
  header .nav-overlay{ display:none !important; }
  header .header-actions{
    justify-self:end;
    display:flex;
    gap:10px;
    align-items:center;
  }
}

/* Mobile drawer links style kept from earlier */


/* ===== Header v4 (reference-style, clean desktop + proper mobile) ===== */
header{ position: sticky; top:0; z-index: 10000; background: rgba(255,255,255,.78); backdrop-filter: blur(18px); border-bottom: 1px solid rgba(11,18,32,.10); }
.header-top, .header-nav{ display:flex; align-items:center; justify-content:space-between; gap:12px; }
.header-top{ padding: 10px 0; }
.header-nav{ padding: 8px 0 12px 0; }

.top-pill{
  display:inline-flex; align-items:center; gap:8px;
  padding: 10px 14px;
  border-radius: 999px;
  border: 1px solid rgba(11,18,32,.10);
  background: rgba(255,255,255,.90);
  box-shadow: 0 14px 34px rgba(0,0,0,.06);
  font-weight: 900;
  color: rgba(11,18,32,.86);
  text-decoration:none;
}
.top-pill strong{ font-weight: 950; }

.brand-link{ display:flex; align-items:center; gap:12px; text-decoration:none; color: var(--ink); }
.brand-link .logo{ width:42px; height:42px; }
.brand-link .brand-name{ font-weight: 950; }

.header-right{ display:flex; align-items:center; gap:10px; }

.header-nav .links{
  display:flex; align-items:center; justify-content:center;
  gap: 22px;
  flex: 1;
}
.header-nav .links a{
  background: transparent;
  border: none;
  padding: 10px 2px;
  font-weight: 900;
  text-transform: uppercase;
  font-size: 12px;
  letter-spacing: 1.1px;
  color: rgba(11,18,32,.78);
  text-decoration:none;
}
.header-nav .links a:hover{ color: rgba(11,18,32,.95); }

.header-nav .menu-toggle{ display:none; }

/* Mobile: hamburger left, brand center, phone icon + language right; nav drawer opens */
@media (max-width: 940px){
  .header-top{ padding: 10px 0 8px 0; }
  .header-top .top-left{ display:none; } /* hide big phone pill on mobile */
  .brand-link .brand-name{ display:none; } /* keep logo clean like reference */
  .header-nav{ padding: 0 0 10px 0; }
  .header-nav{ display:none; } /* we put menu inside overlay drawer; keep single-row header like reference */
  header .menu-toggle{ display:inline-flex; }
  header .nav-overlay{ display:none; position: fixed; inset:0; background: rgba(11,18,32,.28); backdrop-filter: blur(2px); z-index:9998; }
  body.nav-open header .nav-overlay{ display:block; }
  header .drawer{
    display:none;
    position: fixed;
    left: 12px; right: 12px;
    top: 72px;
    padding: 14px;
    border-radius: 18px;
    background: rgba(255,255,255,.94);
    border: 1px solid rgba(11,18,32,.10);
    box-shadow: 0 28px 70px rgba(0,0,0,.12);
    z-index: 9999;
  }
  body.nav-open header .drawer{ display:block; }
  header .drawer a{
    display:block;
    padding: 12px 12px;
    border-radius: 14px;
    background: rgba(11,18,32,.04);
    border: 1px solid rgba(11,18,32,.08);
    margin-bottom: 10px;
  }
  header .drawer a:last-child{ margin-bottom:0; }
  .icon-pill{
    width:44px; height:44px;
    padding:0;
    display:inline-flex; align-items:center; justify-content:center;
    border-radius: 14px;
  }
}

/* Desktop keep two-row header; hide hamburger/drawer */
@media (min-width: 941px){
  header .menu-toggle, header .drawer, header .nav-overlay{ display:none !important; }
}

</style>
<link href="https://maps.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://maps.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&family=Playfair+Display:wght@500;600;700;800&display=swap" rel="stylesheet">
</head>
<body class="page-services">

<header>
  <div class="nav-overlay" aria-hidden="true"></div>
  <div class="container header-top">
    <a class="top-pill top-left" href="tel:+14383203733">üìû <strong>+1 (438) 320-3733</strong></a>

    <a class="brand-link" href="index.html" aria-label="Home">
      <div class="logo">MT</div>
      <div class="brand-name" data-i18n="brand_name">Mont Tremblant Limo</div>
    </a>

    <div class="header-right">
      <a class="top-pill" href="https://wa.me/14383203733" target="_blank" rel="noreferrer" data-i18n="nav_whatsapp">WhatsApp</a>
      <div aria-label="Language switcher" class="lang-switch">
<button aria-pressed="true" class="lang-btn active" data-lang="en" type="button">EN</button>
<button aria-pressed="false" class="lang-btn" data-lang="fr" type="button">FR</button>
</div>
      <button class="menu-toggle icon-pill" type="button" aria-label="Menu" aria-expanded="false">
        <i></i><i></i><i></i>
      </button>
      <a class="top-pill icon-pill" href="tel:+14383203733" aria-label="Call">
        üìû
      </a>
    </div>
  </div>

  <div class="container header-nav">
    <div style="width:42px"></div>
    <div class="links">
      <a href="booking.html" data-i18n="nav_book">Book online</a>
        
        <a href="corporate.html#corporate" data-i18n="nav_corporate">Corporate</a><a href="#fleet" data-i18n="nav_fleet">Our fleet</a>
        <a href="services.html" data-i18n="nav_services">Services</a>
        <a href="#routes" data-i18n="nav_routes">Destinations</a>
        <a href="#airports" data-i18n="nav_airports">Airports</a>
        <a href="#faq" data-i18n="nav_faq">FAQ</a>
        <a href="#contact" data-i18n="nav_contact">Contact</a>
    </div>
    <div style="width:42px"></div>
  </div>

  <nav class="drawer" aria-label="Mobile menu">
    <a href="booking.html" data-i18n="nav_book">Book online</a>
        
        <a href="corporate.html#corporate" data-i18n="nav_corporate">Corporate</a><a href="#fleet" data-i18n="nav_fleet">Our fleet</a>
        <a href="services.html" data-i18n="nav_services">Services</a>
        <a href="#routes" data-i18n="nav_routes">Destinations</a>
        <a href="#airports" data-i18n="nav_airports">Airports</a>
        <a href="#faq" data-i18n="nav_faq">FAQ</a>
        <a href="#contact" data-i18n="nav_contact">Contact</a>
    <a href="tel:+14383203733">üìû +1 (438) 320-3733</a>
    <a href="mailto:info@monttremblantlimoservices.com?subject=Booking%20Request">‚úâÔ∏è info@monttremblantlimoservices.com</a>
    <a href="https://wa.me/14383203733" target="_blank" rel="noreferrer">WhatsApp</a>
  </nav>
</header>

<div class="hero-wrap">
<div class="hero-inner container">
<div class="hero-left">
<div class="hero-title" data-i18n="hero_title" data-i18n="services_page_title">Services</div>
<div class="hero-sub" data-i18n="hero_sub" data-i18n="services_page_sub">Luxury chauffeur services across Montr√©al, Mont‚ÄëTremblant, and airports.</div>
<div class="hero-badges">
<span class="badge" data-i18n="badge_247">24/7 booking</span>
<span class="badge" data-i18n="badge_pro">Professional chauffeurs</span>
<span class="badge" data-i18n="badge_premium">Premium vehicles</span>
<span class="badge" data-i18n="badge_cities">Mont-Tremblant ‚Ä¢ Montr√©al ‚Ä¢ Ottawa</span>
</div>
</div>
<aside aria-label="Search booking" class="booking-card" id="booking">
<div class="tabs">
<button aria-selected="true" class="tab active" data-i18n="tab_oneway" id="tabOneWay" type="button">One way</button>
<button aria-selected="false" class="tab" data-i18n="tab_hourly" id="tabHourly" type="button">By the hour (min 1h)</button>
</div>
<div class="tabhint" data-i18n-html="tab_hint_html">Need a chauffeur for events, shopping or a night out? Choose <b>By the hour</b> (minimum 1 hour).</div>
<div class="book-body">
<div aria-hidden="true" class="stepbar">
<div class="stepdot"><i></i></div>
<div class="steptext" data-i18n="step_1of3">Step 1 of 3</div>
</div>
<form id="heroSearchForm">
<input id="heroMode" type="hidden" value="one_way"/>
<!-- ‚úÖ store coordinates when user picks a suggestion -->
<input id="h_pickup_lat" type="hidden" value=""/>
<input id="h_pickup_lng" type="hidden" value=""/>
<input id="h_dropoff_lat" type="hidden" value=""/>
<input id="h_dropoff_lng" type="hidden" value=""/>
<!-- route + pricing -->
<input id="h_distance_m" type="hidden" value=""/>
<input id="h_duration_s" type="hidden" value=""/>
<input id="h_price_estimate" type="hidden" value=""/>
<input id="h_pickup_airport" type="hidden" value=""/>
<input id="h_dropoff_airport" type="hidden" value=""/>
<div class="selected-vehicle" id="selectedVehicleBanner" style="display:none;">
<div class="selected-vehicle-info">
<img alt="" id="selectedVehicleImage" src=""/>
<span>Selected vehicle: <b id="selectedVehicleName"></b></span>
</div>
<button id="clearSelectedVehicle" type="button">Clear</button>
</div>
<!-- Pickup -->
<div class="autocomplete-wrap">
<div class="field">
<svg aria-hidden="true" class="ico" fill="none" viewbox="0 0 24 24">
<path d="M12 21s7-6 7-11a7 7 0 1 0-14 0c0 5 7 11 7 11Z" stroke="currentColor" stroke-width="2"></path>
<path d="M12 10.5a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" stroke="currentColor" stroke-width="2"></path>
</svg>
<input autocomplete="off" data-i18n-placeholder="ph_from" id="h_pickup" placeholder="From: address, airport, hotel‚Ä¶" required=""/>
</div>
<div aria-label="Pickup suggestions" class="autocomplete-list" id="h_pickup_list" role="listbox"></div>
</div>
<!-- Dropoff -->
<div class="autocomplete-wrap" id="heroDropoffWrap">
<div class="field">
<svg aria-hidden="true" class="ico" fill="none" viewbox="0 0 24 24">
<path d="M12 21s7-6 7-11a7 7 0 1 0-14 0c0 5 7 11 7 11Z" stroke="currentColor" stroke-width="2"></path>
<path d="M12 10.5a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" stroke="currentColor" stroke-width="2"></path>
</svg>
<input autocomplete="off" data-i18n-placeholder="ph_to" id="h_dropoff" placeholder="To: address, airport, hotel‚Ä¶" required=""/>
</div>
<div aria-label="Dropoff suggestions" class="autocomplete-list" id="h_dropoff_list" role="listbox"></div>
</div>
<div class="row2">
<div class="field">
<svg aria-hidden="true" class="ico" fill="none" viewbox="0 0 24 24">
<path d="M7 2v3M17 2v3" stroke="currentColor" stroke-linecap="round" stroke-width="2"></path>
<path d="M3 9h18" stroke="currentColor" stroke-width="2"></path>
<path d="M5 5h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2Z" stroke="currentColor" stroke-width="2"></path>
</svg>
<input id="h_date" required="" type="date"/>
</div>
<div class="field">
<svg aria-hidden="true" class="ico" fill="none" viewbox="0 0 24 24">
<path d="M12 8v5l3 2" stroke="currentColor" stroke-linecap="round" stroke-width="2"></path>
<path d="M12 22a10 10 0 1 0 0-20 10 10 0 0 0 0 20Z" stroke="currentColor" stroke-width="2"></path>
</svg>
<select id="h_time" required=""></select>
</div>
</div>
<div class="field" id="heroTransferWrap" style="margin-top:10px">
<svg aria-hidden="true" class="ico" fill="none" viewbox="0 0 24 24">
<path d="M3 11h18M6 11V7a3 3 0 0 1 3-3h6a3 3 0 0 1 3 3v4" stroke="currentColor" stroke-linecap="round" stroke-width="2"></path>
<path d="M7 20a2 2 0 1 0 0-4 2 2 0 0 0 0 4ZM17 20a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" stroke="currentColor" stroke-width="2"></path>
</svg>
<select id="h_transfer">
<option data-i18n="opt_point" selected="" value="point">City / Point-to-point</option>
<option data-i18n="opt_airport" value="airport">Airport transfer</option>
</select>
</div>
<div class="field" id="heroHoursWrap" style="display:none; margin-top:10px">
<svg aria-hidden="true" class="ico" fill="none" viewbox="0 0 24 24">
<path d="M12 8v5l3 2" stroke="currentColor" stroke-linecap="round" stroke-width="2"></path>
<path d="M12 22a10 10 0 1 0 0-20 10 10 0 0 0 0 20Z" stroke="currentColor" stroke-width="2"></path>
</svg>
<select id="h_hours">
<option value="1">1 hour</option>
<option value="2">2 hours</option>
<option value="3">3 hours</option>
<option value="4">4 hours</option>
<option value="5">5 hours</option>
<option value="6">6 hours</option>
<option value="7">7 hours</option>
<option value="8">8 hours</option>
<option value="9">9 hours</option>
<option value="10">10 hours</option>
<option value="11">11 hours</option>
<option value="12">12 hours</option>
</select>
</div>
<div aria-label="Map preview" class="gmap" id="gmap"><div data-i18n="map_loading" id="gmap-loading" style="display:flex;align-items:center;justify-content:center;height:100%;font:14px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Arial;color:#6b7280;">Loading map‚Ä¶</div></div>
<div aria-live="polite" class="route-info" id="routeInfo">
<div class="ri-row"><span data-i18n="ri_distance">Distance</span><strong id="riDistance">‚Äî</strong></div>
<div class="ri-row"><span data-i18n="ri_duration">Estimated time</span><strong id="riDuration">‚Äî</strong></div>
<div class="ri-row"><span data-i18n="ri_price">Starts from</span><strong id="riPrice">‚Äî</strong></div>
<div class="ri-badges" id="riBadges"></div>
</div>
<div class="note" data-i18n="note_pro">Professional chauffeur ‚Ä¢ clean premium vehicles.</div>
<button class="search-btn" data-i18n="btn_choose_vehicle" id="heroSearchBtn" type="submit">Choose vehicle</button>
<div class="alert bad" id="heroAlert"></div>
</form>
</div>
</aside>
</div>
</div>

<div aria-hidden="true" class="overlay" id="overlayCheckout">
<div class="overlay-top">
<div class="container">
<div class="overlay-title" data-i18n="ov_title_checkout">Mont Tremblant Limo ‚Ä¢ Checkout</div>
<button class="overlay-close" data-i18n="btn_close" onclick="closeOverlay('overlayCheckout', true)" type="button">Close</button>
</div>
</div>
<div class="overlay-body">
<div class="flow-wrap">
<div class="flow-steps"><span data-i18n="chk_step_search">x</span><span>‚Ä∫</span><span data-i18n="chk_step_class">x</span><span>‚Ä∫</span><span class="on" data-i18n="chk_step_checkout">x</span></div>
<div class="summary-pill" id="checkoutSummary"></div>
<div class="flow-h1" data-i18n="ov_your_details">Your details</div>
<div class="flow-sub" data-i18n-html="ov_details_sub_html">Enter your details. We will email you a ‚Äúrequest received‚Äù confirmation, then you can pay securely via Stripe.</div>
<label data-i18n="lbl_name" for="c_name">Name</label>
<input data-i18n-placeholder="ph_name" id="c_name" placeholder="Your name"/>
<label data-i18n="lbl_phone" for="c_phone">Phone</label>
<input data-i18n-placeholder="ph_phone" id="c_phone" placeholder="+1 ..."/>
<label data-i18n="lbl_email" for="c_email">Email</label>
<input data-i18n-placeholder="ph_email" id="c_email" placeholder="you@example.com"/>
<label data-i18n="lbl_passengers" for="c_passengers">Passengers (optional)</label>
<input data-i18n-placeholder="ph_passengers" id="c_passengers" inputmode="numeric" max="50" min="1" placeholder="e.g., 2" type="number"/>
<label data-i18n="lbl_luggage" for="c_luggage">Luggage (optional)</label>
<input data-i18n-placeholder="ph_luggage" id="c_luggage" inputmode="numeric" max="50" min="0" placeholder="e.g., 2" type="number"/>
<label data-i18n="lbl_notes" for="c_notes">Notes (optional)</label>
<textarea data-i18n-placeholder="ph_notes" id="c_notes" placeholder="Passengers, luggage, flight #, stops‚Ä¶"></textarea>
<div class="estimate-box" style="margin-top:14px;">
<div class="estimate-top">
<b data-i18n="lbl_total_est">Total estimate</b>
<div class="estimate-value" id="checkoutTotal">‚Äî</div>
</div>
<div class="estimate-sub" id="checkoutSub"></div>
</div>
<div class="flow-actions" style="margin-top:14px;">
<button class="btn" data-i18n="btn_back" onclick="backToVehicles()" type="button">Back</button>
<button class="btn btn-primary" data-i18n="btn_pay_stripe" onclick="startStripeCheckoutFromOverlay()" type="button">Pay with Stripe</button>
<button class="btn" data-i18n="btn_whatsapp" onclick="sendWhatsAppFromOverlay()" type="button">WhatsApp</button>
</div>
<div class="tinyhint" id="checkoutStatus" style="margin-top:10px;"></div>
</div>
</div>
</div>

<main class="container">
  <section class="section reveal" id="services">
    <h2 data-i18n="services_categories">Popular services</h2>
    <p class="subtitle" data-i18n="services_page_sub">Luxury chauffeur services across Montr√©al, Mont‚ÄëTremblant, and all major airports.</p>

    <div class="service-grid">
      <div class="service-card">
        <h3 data-i18n="svc_airport">Airport transportation</h3>
        <p>YUL / YMX pickups, meet &amp; greet, luggage-friendly SUVs and Sprinter options.</p>
        <div class="service-cta">
          <a class="btn btn-primary" href="yul-airport-transfer.html" data-i18n="services_cta_book">Book online</a>
          <a class="btn" href="mailto:info@monttremblantlimoservices.com?subject=Airport%20Transfer%20Quote&amp;body=Hello%20Mont%20Tremblant%20Limo%20Services,%0D%0A%0D%0AI%20need%20an%20airport%20transfer.%0D%0APickup:%0D%0ADropoff:%0D%0ADate:%0D%0ATime:%0D%0APassengers:%0D%0ALuggage:%0D%0A%0D%0AThank%20you.">Email</a>
          <a class="btn btn-whatsapp" href="https://wa.me/14383203733" target="_blank" rel="noreferrer">WhatsApp</a>
        </div>
      </div>

      <div class="service-card">
        <h3 data-i18n="svc_corporate">Corporate transportation</h3>
        <p>Executive chauffeur, roadshows, meetings, and VIP client transfers in Montr√©al.</p>
        <div class="service-cta">
          <a class="btn btn-primary" href="montreal-limo-service.html" data-i18n="services_cta_book">Book online</a>
          <a class="btn" href="mailto:info@monttremblantlimoservices.com?subject=Corporate%20Chauffeur%20Quote&amp;body=Hello%20Mont%20Tremblant%20Limo%20Services,%0D%0A%0D%0AI%20need%20corporate%20chauffeur%20service.%0D%0ADate:%0D%0AHours:%0D%0APickup%20area:%0D%0A%0D%0AThank%20you.">Email</a>
        </div>
      </div>

      <div class="service-card">
        <h3 data-i18n="svc_wedding">Wedding transportation</h3>
        <p>Elegant arrivals, photo stops, and coordinated guest transport for your event.</p>
        <div class="service-cta">
          <a class="btn btn-primary" href="index.html#contact" data-i18n="services_cta_quote">Get a quote</a>
          <a class="btn btn-whatsapp" href="https://wa.me/14383203733" target="_blank" rel="noreferrer">WhatsApp</a>
        </div>
      </div>

      <div class="service-card">
        <h3 data-i18n="svc_event">Event transportation</h3>
        <p>Concerts, galas, bachelor parties, dinners ‚Äî safe, private, on-time service.</p>
        <div class="service-cta">
          <a class="btn btn-primary" href="index.html#contact" data-i18n="services_cta_quote">Get a quote</a>
          <a class="btn btn-whatsapp" href="https://wa.me/14383203733" target="_blank" rel="noreferrer">WhatsApp</a>
        </div>
      </div>

      <div class="service-card">
        <h3 data-i18n="svc_hourly">Hourly chauffeur</h3>
        <p>Flexible stops for shopping, business, and nights out ‚Äî minimum 1 hour.</p>
        <div class="service-cta">
          <a class="btn btn-primary" href="index.html" data-i18n="services_cta_book">Book online</a>
          <a class="btn btn-whatsapp" href="https://wa.me/14383203733" target="_blank" rel="noreferrer">WhatsApp</a>
        </div>
      </div>

      <div class="service-card">
        <h3 data-i18n="svc_ski">Ski resort transfers</h3>
        <p>Montr√©al ‚Üî Mont‚ÄëTremblant and ski areas. Plenty of space for gear.</p>
        <div class="service-cta">
          <a class="btn btn-primary" href="montreal-to-tremblant.html" data-i18n="services_cta_book">Book online</a>
          <a class="btn btn-whatsapp" href="https://wa.me/14383203733" target="_blank" rel="noreferrer">WhatsApp</a>
        </div>
      </div>
    </div>
  </section>

  <section class="section reveal" id="routes">
    <h2 data-i18n="services_routes">City‚Äëto‚Äëcity &amp; popular routes</h2>
    <p class="subtitle">Fast, private long‚Äëdistance rides in premium SUVs and vans.</p>

    <div class="service-grid">
      <div class="service-card">
        <h3 data-i18n="route_mtl_tremblant">Montr√©al to Mont‚ÄëTremblant limousine service</h3>
        <p>Popular ski and resort route ‚Äî ideal for families and groups.</p>
        <div class="service-cta">
          <a class="btn btn-primary" href="montreal-to-tremblant.html" data-i18n="services_cta_book">Book online</a>
        </div>
      </div>

      <div class="service-card">
        <h3 data-i18n="route_mtl_ottawa">Montr√©al to Ottawa limousine service</h3>
        <p>Direct, private travel for corporate and personal trips.</p>
        <div class="service-cta">
          <a class="btn btn-primary" href="index.html#contact" data-i18n="services_cta_quote">Get a quote</a>
        </div>
      </div>

      <div class="service-card">
        <h3 data-i18n="route_mtl_toronto">Montr√©al to Toronto limousine service</h3>
        <p>Long‚Äëdistance comfort with professional chauffeurs.</p>
        <div class="service-cta">
          <a class="btn btn-primary" href="index.html#contact" data-i18n="services_cta_quote">Get a quote</a>
        </div>
      </div>

      <div class="service-card">
        <h3 data-i18n="route_mtl_qc">Montr√©al to Qu√©bec City limousine service</h3>
        <p>Scenic travel with premium vehicles and flexible pickup times.</p>
        <div class="service-cta">
          <a class="btn btn-primary" href="index.html#contact" data-i18n="services_cta_quote">Get a quote</a>
        </div>
      </div>

      <div class="service-card">
        <h3 data-i18n="route_mtl_ny">Montr√©al to New York limousine service</h3>
        <p>Cross‚Äëborder trips ‚Äî custom itineraries available.</p>
        <div class="service-cta">
          <a class="btn btn-primary" href="index.html#contact" data-i18n="services_cta_quote">Get a quote</a>
        </div>
      </div>
    </div>
  </section>

  

  <footer>
    ¬© <span id="year"></span> Mont Tremblant Limo Services ‚Ä¢ All rights reserved
  </footer>

<section class="section reveal" id="service-routes">
  <h2 data-i18n="srv_routes_h2">Popular City-to-City Routes</h2>
  <p class="subtitle" data-i18n="srv_routes_sub">Private transportation between Montr√©al, Mont-Tremblant, and major cities.</p>

  <div class="grid3 reveal">
    <div class="card"><div class="card-body"><h3><a href="montreal-to-tremblant.html">Montr√©al ‚Üí Mont-Tremblant</a></h3><div class="meta" data-i18n="srv_rt1">Ski resort transfers ‚Ä¢ Door-to-door</div></div></div>
    <div class="card"><div class="card-body"><h3><a href="montreal-to-ottawa.html">Montr√©al ‚Üí Ottawa</a></h3><div class="meta" data-i18n="srv_rt2">Business & government travel</div></div></div>
    <div class="card"><div class="card-body"><h3><a href="montreal-to-toronto.html">Montr√©al ‚Üí Toronto</a></h3><div class="meta" data-i18n="srv_rt3">Private long-distance chauffeur</div></div></div>
    <div class="card"><div class="card-body"><h3><a href="montreal-to-quebec-city.html">Montr√©al ‚Üí Qu√©bec City</a></h3><div class="meta" data-i18n="srv_rt4">Hotels ‚Ä¢ Events ‚Ä¢ Old Qu√©bec</div></div></div>
    <div class="card"><div class="card-body"><h3><a href="montreal-to-new-york.html">Montr√©al ‚Üí New York</a></h3><div class="meta" data-i18n="srv_rt5">VIP cross-border trips</div></div></div>
    <div class="card"><div class="card-body"><h3><a href="yul-airport-transfer.html">YUL Airport Transfers</a></h3><div class="meta" data-i18n="srv_rt6">Arrivals ‚Ä¢ Departures ‚Ä¢ Meet & greet</div></div></div>
  </div>
</section>

</main>


<a class="whatsapp-float" href="https://wa.me/14383203733" target="_blank" rel="noreferrer">WhatsApp</a>
<div class="contact-bar">
<a data-i18n="sticky_call" href="tel:+14383203733">Call</a>
<a data-i18n="sticky_email" href="mailto:info@monttremblantlimoservices.com?subject=Booking%20Request">Email</a>
<a data-i18n="sticky_whatsapp" href="https://wa.me/14383203733" rel="noreferrer" target="_blank">WhatsApp</a>
</div>
<script>
  document.getElementById("year").textContent = new Date().getFullYear();

  const BUSINESS_WA = "14383203733";

  const LOCAL_RATES = [
    { id:"escalade", name:"2026 Cadillac Escalade ESV", hourly:150, perKm:0.50, minPrice:150, meta:"Ultra-luxury ‚Ä¢ VIP airport transfers ‚Ä¢ ski trips", img:"/escalade.jpg" },
    { id:"suburban", name:"2025 Chevrolet Suburban", hourly:100, perKm:0.50, minPrice:120, meta:"Spacious ‚Ä¢ luggage friendly ‚Ä¢ long rides", img:"/suburban.jpg" },
    { id:"denali", name:"2026 GMC Yukon Denali", hourly:100, perKm:0.50, minPrice:120, meta:"Premium comfort ‚Ä¢ smooth ride ‚Ä¢ executive travel", img:"/denali.jpg" },
    { id:"qx60", name:"2024 Infiniti QX60", hourly:75, perKm:0.50, minPrice:99, meta:"Comfort + value ‚Ä¢ airport transfers ‚Ä¢ city rides", img:"/qx60.jpg" },
    { id:"tesla", name:"2023 Tesla Model Y", hourly:75, perKm:0.25, minPrice:75, meta:"Quiet ‚Ä¢ modern ‚Ä¢ eco-friendly", img:"/tesla.jpg" },
    { id:"sprinter", name:"Mercedes Sprinter (Group Van)", hourly:299, perKm:0.00, minPrice:299, meta:"Groups ‚Ä¢ events ‚Ä¢ ski luggage", img:"/sprinter.jpg" }
  ];

  // expose for map pricing script
  window.LOCAL_RATES = LOCAL_RATES;

  const state = {
    mode: "one_way",
    pickup: "",
    dropoff: "",
    date: "",
    time: "",
    transfer: "point",
    hours: 1,
    preferredVehicleId: null,
    selectedVehicleId: null,
    computedVehicles: [],
    pickup_lat: "",
    pickup_lng: "",
    dropoff_lat: "",
    dropoff_lng: ""
  };

  function $(id){ return document.getElementById(id); }
  function val(id){ return ($(id)?.value || "").trim(); }

  function formatMoney(n, currency){
    if (!Number.isFinite(Number(n))) return "‚Äî";
    const cur = (currency || "CAD").toUpperCase();
    const prefix = (cur === "USD") ? "US$" : "CA$";
    return prefix + Math.round(Number(n));
  }

  function getRouteNumbers(){
    const distanceM = Number(document.getElementById("h_distance_m")?.value || 0);
    const durationS = Number(document.getElementById("h_duration_s")?.value || 0);
    return {
      distanceM: Number.isFinite(distanceM) ? distanceM : 0,
      durationS: Number.isFinite(durationS) ? durationS : 0
    };
  }

  function vehiclePriceEstimate(vehicleId, distanceM, durationS){
    const v = LOCAL_RATES.find(x=>x.id===vehicleId);
    if (!v) return 0;

    const minPrice = Number(v.minPrice || 0);

    // Hourly mode: bill selected hours (min 1 hour)
    if (state.mode === "hourly"){
      const h = Math.max(1, Number(state.hours || 1));
      return Math.round(Math.max(minPrice, v.hourly * h));
    }

    // Point-to-point / airport: travel time + per-km, then apply vehicle minimum price
    const km = (distanceM || 0) / 1000;
    const travelHours = (durationS || 0) / 3600;

    const perKm = Number(v.perKm || 0);
    const total = (travelHours * v.hourly) + (km * perKm);

    return Math.round(Math.max(minPrice, total));
  }

  function buildTimeOptions(stepMinutes = 5, selectId){
    const timeEl = document.getElementById(selectId);
    if (!timeEl || timeEl.tagName !== "SELECT") return;

    timeEl.innerHTML = "";
    const ph = document.createElement("option");
    ph.value = "";
    ph.textContent = (document.documentElement.getAttribute("lang") || "en").toLowerCase().startsWith("fr") ? "S√©lectionnez l'heure" : "Select time";
    ph.selected = true;
    ph.disabled = true;
    timeEl.appendChild(ph);

    const pad = (n)=> String(n).padStart(2,"0");
    for (let minutes = 0; minutes < 24 * 60; minutes += stepMinutes){
      const hh = Math.floor(minutes / 60);
      const mm = minutes % 60;
      const value = `${pad(hh)}:${pad(mm)}`;
      const hour12 = ((hh + 11) % 12) + 1;
      const ampm = hh < 12 ? "AM" : "PM";
      const label = `${hour12}:${pad(mm)} ${ampm}`;
      const opt = document.createElement("option");
      opt.value = value;
      opt.textContent = label;
      timeEl.appendChild(opt);
    }
    const now = new Date();
    let mins = now.getHours() * 60 + now.getMinutes();
    mins = Math.ceil(mins / stepMinutes) * stepMinutes;
    if (mins >= 24*60) mins = 0;
    const hh = Math.floor(mins / 60);
    const mm = mins % 60;
    timeEl.value = `${pad(hh)}:${pad(mm)}`;
  }

  function clearAutocompleteList(listEl){
    if (!listEl) return;
    listEl.innerHTML = "";
    listEl.style.display = "none";
  }

  function renderAutocompleteList(listEl, items, onPick){
    if (!listEl) return;
    listEl.innerHTML = "";
    if (!items.length){
      listEl.style.display = "none";
      return;
    }

    items.forEach((item)=>{
      const btn = document.createElement("button");
      btn.type = "button";
      btn.innerHTML = `${item.main}<span class="muted">${item.sub}</span>`;
      btn.addEventListener("mousedown", (e)=>{
        e.preventDefault();
        onPick(item);
        clearAutocompleteList(listEl);
      });
      listEl.appendChild(btn);
    });

    listEl.style.display = "block";
  }

  // ‚úÖ Airport code + airport name lookup (works without Google keys)
  const AIRPORTS = [
    { code:"YUL", name:"Montr√©al‚ÄìTrudeau International Airport", city:"Montr√©al (Dorval), QC", country:"Canada", lat:45.4706, lng:-73.7408 },
    { code:"YMX", name:"Montr√©al‚ÄìMirabel International Airport", city:"Mirabel, QC", country:"Canada", lat:45.6795, lng:-74.0387 },
    { code:"YHU", name:"Montr√©al Saint-Hubert Longueuil Airport", city:"Longueuil, QC", country:"Canada", lat:45.5175, lng:-73.4169 },
    { code:"YYZ", name:"Toronto Pearson International Airport", city:"Toronto, ON", country:"Canada", lat:43.6777, lng:-79.6248 },
    { code:"YOW", name:"Ottawa International Airport", city:"Ottawa, ON", country:"Canada", lat:45.3225, lng:-75.6692 },
    { code:"YQB", name:"Qu√©bec City Jean Lesage International Airport", city:"Qu√©bec City, QC", country:"Canada", lat:46.7911, lng:-71.3933 },
    { code:"JFK", name:"John F. Kennedy International Airport", city:"New York, NY", country:"USA", lat:40.6413, lng:-73.7781 },
    { code:"EWR", name:"Newark Liberty International Airport", city:"Newark, NJ", country:"USA", lat:40.6895, lng:-74.1745 },
    { code:"LGA", name:"LaGuardia Airport", city:"New York, NY", country:"USA", lat:40.7769, lng:-73.8740 },
    { code:"BOS", name:"Boston Logan International Airport", city:"Boston, MA", country:"USA", lat:42.3656, lng:-71.0096 }
  ];

  function normalize(s){ return String(s || "").trim().toUpperCase(); }

  function findAirportSuggestions(query){
    const q = normalize(query);
    if (!q) return [];

    // If user types exactly 3 letters, treat as IATA first
    const looksLikeIATA = /^[A-Z]{3}$/.test(q);
    const tokens = q.split(/\s+/).filter(Boolean);

    const matches = AIRPORTS.filter(a=>{
      if (looksLikeIATA) return a.code === q;
      // allow searching by code anywhere ("YUL airport"), or by name/city
      const hay = `${a.code} ${a.name} ${a.city} ${a.country}`.toUpperCase();
      return tokens.every(t => hay.includes(t));
    }).slice(0, 6);

    return matches.map(a=>({
      type: "airport",
      main: `${a.name} (${a.code})`,
      sub: `${a.code} ‚Ä¢ ${a.city} ‚Ä¢ ${a.country}`,
      value: `${a.name} (${a.code}), ${a.city}`,
      lat: a.lat,
      lng: a.lng
    }));
  }

  // ‚úÖ Better "street address" rendering using Photon properties
  function formatPhotonFeature(f){
    const p = f.properties || {};
    const g = f.geometry || {};
    const coords = Array.isArray(g.coordinates) ? g.coordinates : null;
    const lng = coords ? coords[0] : null;
    const lat = coords ? coords[1] : null;

    const housenumber = p.housenumber || "";
    const street = p.street || "";
    const name = p.name || "";

    const line1 = (housenumber || street)
      ? [housenumber, street].filter(Boolean).join(" ")
      : (name || p.locality || p.city || p.country || "Address");

    const city = p.city || p.locality || "";
    const region = p.state || p.region || "";
    const postcode = p.postcode || "";
    const country = p.country || "";
    const subParts = [city, region, postcode, country].filter(Boolean);
    const sub = subParts.join(", ") || "Select this address";

    const valueParts = [line1, city, region, postcode, country].filter(Boolean);
    const value = valueParts.join(", ");

    return {
      type: "address",
      main: line1,
      sub,
      value,
      lat: (typeof lat === "number" ? lat : null),
      lng: (typeof lng === "number" ? lng : null)
    };
  }

  async function fetchAddressSuggestions(query){
    let q = (query || "").trim();
    if (q.length < 3) return [];

    // light normalization (people often type "four season" instead of "four seasons")
    q = q.replace(/\bfour\s+season\b/i, "four seasons");

    const centerLat = 45.5019;     // Montr√©al
    const centerLon = -73.5674;

    // Prefer the Ottawa ‚Üî Montr√©al ‚Üî Qu√©bec City corridor, but DO NOT hard-restrict results
    const viewbox = "-76.50,46.90,-70.40,44.70"; // left,top,right,bottom

    const photonUrl =
      `https://photon.komoot.io/api/?q=${encodeURIComponent(q)}&limit=8&lang=en` +
      `&lat=${centerLat}&lon=${centerLon}`;

    const nominatimUrl =
      `https://nominatim.openstreetmap.org/search?format=jsonv2&addressdetails=1&limit=8` +
      `&countrycodes=ca&viewbox=${viewbox}&q=${encodeURIComponent(q)}`;

    const formatNominatim = (r)=>{
      const a = r.address || {};
      const lat = r.lat ? Number(r.lat) : null;
      const lng = r.lon ? Number(r.lon) : null;

      const line1 = r.name || r.display_name?.split(",")[0] || "Address";
      const city = a.city || a.town || a.village || a.municipality || "";
      const region = a.state || a.province || "";
      const postcode = a.postcode || "";
      const country = a.country || "Canada";

      const sub = [city, region, postcode, country].filter(Boolean).join(", ") || (r.display_name || "Select this address");
      const value = r.display_name || [line1, city, region, postcode, country].filter(Boolean).join(", ");

      return { type:"address", main: line1, sub, value, lat, lng };
    };

    try{
      const [nomRes, phoRes] = await Promise.allSettled([
        fetch(nominatimUrl, { headers: { "Accept":"application/json" } }),
        fetch(photonUrl,    { headers: { "Accept":"application/json" } })
      ]);

      let nomItems = [];
      if (nomRes.status === "fulfilled" && nomRes.value && nomRes.value.ok){
        const arr = await nomRes.value.json().catch(()=>[]);
        if (Array.isArray(arr)) nomItems = arr.map(formatNominatim);
      }

      let phoItems = [];
      if (phoRes.status === "fulfilled" && phoRes.value && phoRes.value.ok){
        const data = await phoRes.value.json().catch(()=>({}));
        const feats = Array.isArray(data.features) ? data.features : [];
        phoItems = feats.map(formatPhotonFeature);
      }

      const merged = [];
      const seen = new Set();
      const add = (it)=>{
        const k = (it.value || "").toLowerCase();
        if (!k || seen.has(k)) return;
        seen.add(k);
        merged.push(it);
      };

      // Nominatim first (better for POIs), then Photon (good for street addresses)
      nomItems.forEach(add);
      phoItems.forEach(add);

      // rank local/Qu√©bec higher (but keep others as fallback)
      const score = (it)=>{
        const t = `${it.main||""} ${it.sub||""} ${it.value||""}`.toLowerCase();
        let s = 0;
        if (t.includes("montreal") || t.includes("montr√©al")) s += 50;
        if (t.includes("quebec") || t.includes("qu√©bec") || t.includes("qc")) s += 20;
        if (t.includes("laval")) s += 8;
        if (t.includes("ottawa")) s += 6;
        if (t.includes("canada")) s += 3;
        return -s; // sort ascending
      };

      return merged.sort((a,b)=> score(a)-score(b)).slice(0, 8);
    }catch(_e){
      return [];
    }
  }

  function setCoords(latId, lngId, lat, lng){
    const latEl = $(latId);
    const lngEl = $(lngId);
    if (latEl) latEl.value = (lat ?? "");
    if (lngEl) lngEl.value = (lng ?? "");
  }

  function clearCoords(latId, lngId){
    setCoords(latId, lngId, "", "");
  }

  // --- Google Places custom suggestions (uses your existing dropdown UI) ---
let __acService = null;
let __placesService = null;

function getServices(){
  if (!window.google || !google.maps || !google.maps.places) return null;
  if (!__acService) __acService = new google.maps.places.AutocompleteService();
  if (!__placesService){
    const map = ensureMap();
    __placesService = new google.maps.places.PlacesService(map || document.createElement("div"));
  }
  return { ac: __acService, ps: __placesService };
}

function qcBiasOptions(){
  // Center Montreal
  return {
    location: new google.maps.LatLng(45.5019, -73.5674),
    radius: 50000, // 50km
  };
}

async function fetchGoogleSuggestions(query){
  const svc = getServices();
  if (!svc) return [];
  return new Promise((resolve) => {
    svc.ac.getPlacePredictions(
      {
        input: query,
        componentRestrictions: { country: ["ca","us"] },
        locationBias: getQcCorridorBounds(),
        ...qcBiasOptions()
      },
      (preds, status) => {
        if (status !== google.maps.places.PlacesServiceStatus.OK || !preds) return resolve([]);
        const items = preds.slice(0, 6).map(p => ({
          main: p.structured_formatting?.main_text || p.description,
          sub: p.structured_formatting?.secondary_text || "",
          value: p.description,
          place_id: p.place_id
        }));
        resolve(items);
      }
    );
  });
}

function pickGooglePlace(item, input, latId, lngId, kind){
  const svc = getServices();
  if (!svc || !item.place_id) return;
  svc.ps.getDetails(
    { placeId: item.place_id, fields: ["name","formatted_address","geometry"] },
    (place, status) => {
      if (status !== google.maps.places.PlacesServiceStatus.OK || !place || !place.geometry) return;
      const addr = place.formatted_address || place.name || item.value;
      input.value = addr;
      const lat = place.geometry.location.lat();
      const lng = place.geometry.location.lng();
      setCoords(latId, lngId, lat, lng);
      setMarker(kind, lat, lng, place.name || addr);
      try { updateRouteAndEstimate(); } catch(e) {}
    }
  );
}

function setupAutocomplete(inputId, listId, latId, lngId){
    const input = $(inputId);
    const list = $(listId);
    if (!input || !list) return;

    let timer = null;
    let token = 0;

    const onPick = (item)=>{
      input.value = item.value;
      setCoords(latId, lngId, item.lat, item.lng);
      if (window.google && google.maps) setMarker((inputId.includes('pickup')||inputId.includes('from'))?'pickup':'dropoff', item.lat, item.lng, item.value);
      try { updateRouteAndEstimate(); } catch(e) {}

    };

    const doSearch = async ()=>{
      const q = input.value.trim();
      if (q.length < 2){
        clearAutocompleteList(list);
        return;
      }

      // If Google Places is enabled, use Google predictions (faster + better results)
      if (window.googlePlacesEnabled && window.google && google.maps && google.maps.places){
        const items = await fetchGoogleSuggestions(q);
        renderAutocompleteList(list, items, (it)=>pickGooglePlace(it, input, latId, lngId, (inputId.includes('pickup')||inputId.includes('from'))?'pickup':'dropoff'));
        return;
      }


      const current = ++token;

      // Airports first (so typing YUL instantly works)
      const airportItems = findAirportSuggestions(q);

      // Addresses second (street addresses / hotels / POIs)
      const addressItems = (q.length >= 3) ? await fetchAddressSuggestions(q) : [];

      if (current !== token) return;

      // de-dupe by value
      const seen = new Set();
      const merged = [];
      [...airportItems, ...addressItems].forEach(it=>{
        const k = (it.value || "").toLowerCase();
        if (!k || seen.has(k)) return;
        seen.add(k);
        merged.push(it);
      });

      renderAutocompleteList(list, merged.slice(0, 8), onPick);
    };

    input.addEventListener("input", ()=>{
      
      // Google Places enabled: keep using our custom dropdown (doSearch).
// if user edits manually after choosing a suggestion, clear coordinates
      clearCoords(latId, lngId);

      if (timer) clearTimeout(timer);
      timer = setTimeout(doSearch, 80);
    });

    input.addEventListener("blur", ()=> setTimeout(()=> clearAutocompleteList(list), 60));
    input.addEventListener("focus", () => {
      // New session improves relevance and speed
      if (window.google && window.google.maps && window.google.maps.places) newSessionToken();
      
      // Google Places enabled: keep using our custom dropdown (doSearch).
if (input.value.trim().length >= 2) doSearch();
    });

    // close list on Esc
    input.addEventListener("keydown", (e)=>{
      if (e.key === "Escape") clearAutocompleteList(list);
    });
  }

  function setHeroMode(mode){
    state.mode = mode;
    $("heroMode").value = mode;

    const one = mode === "one_way";
    $("tabOneWay").classList.toggle("active", one);
    $("tabHourly").classList.toggle("active", !one);

    $("heroDropoffWrap").style.display = one ? "" : "none";
    $("heroTransferWrap").style.display = one ? "" : "none";
    $("heroHoursWrap").style.display = one ? "none" : "";

    $("h_dropoff").required = one;
  }

  function setPreferredVehicle(vehicleId){
    state.preferredVehicleId = vehicleId || null;
    const vehicle = LOCAL_RATES.find(v=>v.id === state.preferredVehicleId);
    const banner = $("selectedVehicleBanner");
    const nameEl = $("selectedVehicleName");
    const imageEl = $("selectedVehicleImage");
    if (!banner || !nameEl) return;
    if (vehicle){
      nameEl.textContent = vehicle.name;
      if (imageEl){
        imageEl.src = vehicle.img;
        imageEl.alt = vehicle.name;
      }
      banner.style.display = "flex";
    }else{
      nameEl.textContent = "";
      if (imageEl){
        imageEl.src = "";
        imageEl.alt = "";
      }
      banner.style.display = "none";
    }
  }

  function showHeroAlert(message){
    const el = $("heroAlert");
    el.style.display = "block";
    el.textContent = message;
  }
  function clearHeroAlert(){
    const el = $("heroAlert");
    el.style.display = "none";
    el.textContent = "";
  }

  function validateHero(){
    if (!val("h_pickup")) return "Please enter a pickup location.";
    if (state.mode === "one_way" && !val("h_dropoff")) return "Please enter a destination.";
    if (!$("h_date").value) return "Please choose a date.";
    if (!val("h_time")) return "Please choose a time.";
    return null;
  }

  function calcVehicleTotal(vehicle){
    const { distanceM, durationS } = getRouteNumbers();
    return vehiclePriceEstimate(vehicle.id, distanceM, durationS);
  }

  function buildVehiclesForTrip(){
    const ORDER = ["escalade","suburban","denali","qx60","tesla","sprinter"];
    const list = LOCAL_RATES.map(v=>{
      const total = calcVehicleTotal(v);
      const note = state.mode === "hourly"
        ? `Total ${formatMoney(total)} for ${Math.max(1, Number(state.hours||1))} hours`
        : (state.transfer === "airport" ? "Airport estimate" : "Point-to-point estimate");
      return { ...v, total, note };
    });
    list.sort((a,b)=>ORDER.indexOf(a.id) - ORDER.indexOf(b.id));
    return list;
  }

  let __scrollY = 0;
  function lockBodyScroll(){
    __scrollY = window.scrollY || 0;
    document.body.style.position = "fixed";
    document.body.style.top = `-${__scrollY}px`;
    document.body.style.left = "0";
    document.body.style.right = "";
    document.body.style.width = "100%";
  }
  function unlockBodyScroll(){
    document.body.style.position = "";
    document.body.style.top = "";
    document.body.style.left = "";
    document.body.style.right = "";
    document.body.style.width = "";
    window.scrollTo(0, __scrollY);
  }

  function anyOverlayOpen(){
    return !!document.querySelector(".overlay.show");
  }

  function closeAllOverlaysVisual(){
    document.querySelectorAll(".overlay.show").forEach(el=>{
      el.classList.remove("show");
      el.setAttribute("aria-hidden","true");
    });
    document.documentElement.classList.remove("overlay-open");
    unlockBodyScroll();
    try{
      if (window.__Tawk_API_DISABLED__ && typeof window.__Tawk_API_DISABLED__.showWidget === "function") {
        window.__Tawk_API_DISABLED__.showWidget();
      }
    }catch(e){}
  }

  function syncFlowBarHeight(overlayId){
    const overlay = document.getElementById(overlayId);
    if (!overlay) return;
    const bar = overlay.querySelector(".flow-actions");
    if (!bar) return;
    const h = Math.ceil(bar.getBoundingClientRect().height);
    if (h > 0) document.documentElement.style.setProperty("--flowbar-h", h + "px");
  }

  function syncViewportHeight(){
    const vh = (window.visualViewport?.height || window.innerHeight || 0);
    if (vh) document.documentElement.style.setProperty("--vh", vh + "px");
  }

  function forceIOSPaint(overlayId){
    const overlay = document.getElementById(overlayId);
    if (!overlay) return;

    const body = overlay.querySelector(".overlay-body");
    const bar  = overlay.querySelector(".flow-actions");

    if (overlay) void overlay.offsetHeight;
    if (body) void body.offsetHeight;
    if (bar) void bar.offsetHeight;

    if (body){
      const y = body.scrollTop;
      body.scrollTop = y + 1;
      body.scrollTop = y;
    }

    if (bar){
      const prev = bar.style.display;
      bar.style.display = "none";
      void bar.offsetHeight;
      bar.style.display = prev || "";
      void bar.offsetHeight;

      bar.style.transform = "translateZ(0)";
      bar.style.webkitTransform = "translateZ(0)";
    }
  }

  function scheduleIOSPaint(overlayId){
    forceIOSPaint(overlayId);
    requestAnimationFrame(()=>forceIOSPaint(overlayId));
    setTimeout(()=>forceIOSPaint(overlayId), 50);
    setTimeout(()=>forceIOSPaint(overlayId), 150);
    setTimeout(()=>forceIOSPaint(overlayId), 350);
  }

  function openOverlay(id, pushHistory = true){
    lockBodyScroll();
    document.documentElement.classList.add("overlay-open");

    const el = $(id);
    el.classList.add("show");
    el.setAttribute("aria-hidden","false");

    try{
      if (window.__Tawk_API_DISABLED__ && typeof window.__Tawk_API_DISABLED__.hideWidget === "function") {
        window.__Tawk_API_DISABLED__.hideWidget();
      }
    }catch(e){}

    if (pushHistory){
      history.pushState({ overlay: id }, "", "#" + id);
    }

    syncFlowBarHeight(id);
    scheduleIOSPaint(id);
  }

  function closeOverlay(id, popHistory = false){
    const el = $(id);
    el.classList.remove("show");
    el.setAttribute("aria-hidden","true");

    if (!anyOverlayOpen()){
      document.documentElement.classList.remove("overlay-open");
      unlockBodyScroll();
      try{
        if (window.__Tawk_API_DISABLED__ && typeof window.__Tawk_API_DISABLED__.showWidget === "function") {
          window.__Tawk_API_DISABLED__.showWidget();
        }
      }catch(e){}
      if (location.hash === "#overlayVehicles" || location.hash === "#overlayCheckout"){
        history.replaceState({ page: "home" }, "", location.pathname + location.search);
      }
    }

    if (popHistory && history.state && history.state.overlay){
      history.back();
    }
  }

  window.addEventListener("popstate", (e)=>{
    closeAllOverlaysVisual();
    if (e.state && e.state.overlay){
      openOverlay(e.state.overlay, false);
    }
  });

  window.addEventListener("resize", ()=>{
    syncViewportHeight();
    if (document.getElementById("overlayVehicles")?.classList.contains("show")) syncFlowBarHeight("overlayVehicles");
    if (document.getElementById("overlayCheckout")?.classList.contains("show")) syncFlowBarHeight("overlayCheckout");
  });
  window.visualViewport?.addEventListener("resize", syncViewportHeight);
  window.visualViewport?.addEventListener("scroll", syncViewportHeight);

  function backToSearch(){ history.back(); }
  function backToVehicles(){ history.back(); }

  function renderTripSummary(){
    const when = `${state.date} at ${state.time}`;
    const route = state.mode === "hourly"
      ? `${state.pickup} ‚Üí Hourly (Mont-Tremblant area)`
      : `${state.pickup} ‚Üí ${state.dropoff}`;

    $("tripSummary").innerHTML = `
      <div><b>${when}</b></div>
      <small>${route}</small>
    `;
  }

  function clearRowBorderHelpers(){
    document.querySelectorAll(".vrow").forEach(r=> r.classList.remove("hide-top-border"));
  }
  function applyRowBorderHelpers(selectedRow){
    clearRowBorderHelpers();
    if (!selectedRow) return;
    selectedRow.classList.add("hide-top-border");
    const next = selectedRow.nextElementSibling;
    if (next && next.classList.contains("vrow")) next.classList.add("hide-top-border");
  }

  function renderVehiclesOverlay(){
    const wrap = $("vehicleOverlayList");
    wrap.innerHTML = "";
    state.selectedVehicleId = null;
    $("btnVehicleContinue").disabled = true;

    const hours = Math.max(1, Number(state.hours || 1));
    let preferredRow = null;

    state.computedVehicles.forEach(v=>{
      const row = document.createElement("div");
      row.className = "vrow";
      row.dataset.vehicleId = v.id;

      const underVehicle = (state.mode === "hourly") ? "" : `<small>${v.note}</small>`;
      const underPrice = (state.mode === "hourly")
        ? `<small style="display:block;margin-top:2px;color:rgba(11,18,32,.62);font-weight:800;">Total ${formatMoney(v.total)} for ${hours} hours</small>`
        : `<small style="display:block;margin-top:2px;color:rgba(11,18,32,.62);font-weight:800;">${v.note}</small>`;

      row.innerHTML = `
        <img class="veh-img" src="${v.img}" alt="${v.name}" />
        <div class="vleft">
          <b>${v.name}</b>
          ${underVehicle}
        </div>
        <div class="vright">
          <div>${formatMoney(v.total)}</div>
          ${underPrice}
        </div>
        <div class="vcheck" aria-hidden="true">‚úì</div>
      `;

      row.addEventListener("click", ()=>{
        document.querySelectorAll(".vrow").forEach(x=>x.classList.remove("selected"));
        row.classList.add("selected");
        state.selectedVehicleId = v.id;
        $("btnVehicleContinue").disabled = false;
        applyRowBorderHelpers(row);
        syncFlowBarHeight("overlayVehicles");
        scheduleIOSPaint("overlayVehicles");
      });

      wrap.appendChild(row);
      if (state.preferredVehicleId && state.preferredVehicleId === v.id) preferredRow = row;
    });

    if (preferredRow){
      preferredRow.click();
      preferredRow.scrollIntoView({ block: "center" });
    }

    syncFlowBarHeight("overlayVehicles");
    scheduleIOSPaint("overlayVehicles");
  }

  function getChosenVehicle(){
    return state.computedVehicles.find(v=>v.id === state.selectedVehicleId) || null;
  }

  function goToCheckoutOverlay(){
    if (!state.selectedVehicleId) return;

    closeOverlay("overlayVehicles", false);

    const chosen = getChosenVehicle();
    const when = `${state.date} at ${state.time}`;
    const route = state.mode === "hourly"
      ? `${state.pickup} ‚Üí Hourly (Mont-Tremblant area)`
      : `${state.pickup} ‚Üí ${state.dropoff}`;

    $("checkoutSummary").innerHTML = `
      <div><b>${when}</b></div>
      <small>${route} ‚Ä¢ ${chosen?.name || ""}</small>
    `;

    $("checkoutTotal").textContent = chosen ? formatMoney(chosen.total) : "‚Äî";
    $("checkoutSub").textContent = chosen
      ? (state.mode === "hourly"
          ? `Total ${formatMoney(chosen.total)} for ${Math.max(3, Number(state.hours||1))} hours`
          : chosen.note)
      : "";

    openOverlay("overlayCheckout", true);
    syncFlowBarHeight("overlayCheckout");
  }

  function buildWhatsAppMessage(payload){
    const lines = [];
    lines.push("Booking Request - Mont Tremblant Limo Services");
    lines.push(`Name: ${payload.name || ""}`);
    if (payload.phone) lines.push(`Phone: ${payload.phone}`);
    lines.push(`Date: ${payload.date}`);
    lines.push(`Time: ${payload.time}`);
    lines.push(`Pickup: ${payload.pickup}`);
    lines.push(`Drop-off: ${payload.dropoff}`);
    lines.push(`Trip type: ${payload.triptype}`);
    lines.push(`Vehicle: ${payload.vehicle}`);
    lines.push(`Estimate: ${payload.estimate_text}`);
    if (payload.notes) lines.push(`Notes: ${payload.notes}`);
    return encodeURIComponent(lines.join("\n"));
  }

  function sendWhatsAppFromOverlay(){
    const chosen = getChosenVehicle();
    if (!chosen) return;

    const name = val("c_name");
    const phone = val("c_phone");
    const notes = val("c_notes");
    const triptype = (state.mode === "hourly") ? "Hourly" : (state.transfer === "airport" ? "Airport transfer" : "Point-to-point");

    const estimateText = (state.mode === "hourly")
      ? `Total ${formatMoney(chosen.total)} for ${Math.max(3, Number(state.hours||1))} hours`
      : `${formatMoney(chosen.total)} (${chosen.note})`;

    const payload = {
      name, phone,
      date: state.date,
      time: state.time,
      pickup: state.pickup,
      dropoff: (state.mode === "hourly") ? "Mont-Tremblant (area)" : state.dropoff,
      triptype,
      vehicle: chosen.name,
      estimate_text: estimateText,
      notes
    };

    window.open("https://wa.me/" + BUSINESS_WA + "?text=" + buildWhatsAppMessage(payload), "_blank", "noreferrer");
  }

    function getTripCurrency(){
    const pc = (val("h_pickup_country") || "").toUpperCase();
    const dc = (val("h_dropoff_country") || "").toUpperCase();
    return (pc === "US" || dc === "US") ? "USD" : "CAD";
  }

  async function startStripeCheckoutFromOverlay(){
    const statusEl = $("checkoutStatus");
    statusEl.textContent = "";

    const chosen = getChosenVehicle();
    if (!chosen){
      statusEl.textContent = "Please choose a vehicle first.";
      return;
    }

    const name = val("c_name");
    if (!name){
      statusEl.textContent = "Please enter your name.";
      return;
    }

    const email = val("c_email");
    const emailOk = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email || "");
    if (!emailOk){
      statusEl.textContent = "Please enter a valid email address.";
      return;
    }

    const phone = val("c_phone");

    // Hourly: min 1 hour
    const hoursNum = Math.max(1, Number(state.hours || 1));
    const currency = getTripCurrency();

    // Build database booking payload (for /api/bookings)
    const dbBooking = {
      mode: (state.mode === "hourly") ? "hourly" : "one_way",
      pickup_text: state.pickup || "",
      dropoff_text: (state.mode === "hourly") ? null : (state.dropoff || ""),
      pickup_lat: Number(val("h_pickup_lat") || 0) || null,
      pickup_lng: Number(val("h_pickup_lng") || 0) || null,
      dropoff_lat: Number(val("h_dropoff_lat") || 0) || null,
      dropoff_lng: Number(val("h_dropoff_lng") || 0) || null,
      pickup_airport: val("h_pickup_airport") || null,
      dropoff_airport: val("h_dropoff_airport") || null,

      pickup_datetime: new Date(`${state.date}T${state.time}:00`).toISOString(),
      hours: (state.mode === "hourly") ? hoursNum : null,

      distance_m: Number(val("h_distance_m") || 0) || null,
      duration_s: Number(val("h_duration_s") || 0) || null,

      currency: currency,
      vehicle_key: chosen.id,
      price_estimate: Number(chosen.total) || 0,

      customer_name: name,
      customer_email: email,
      customer_phone: phone || null,
      passengers: Number(val("c_passengers") || 0) || null,
      luggage: Number(val("c_luggage") || 0) || null,
      notes: val("c_notes") || null
    };

    // Build Stripe checkout payload (kept compatible with your existing endpoint)
    const checkoutBooking = {
      booking_id: null, // will be filled after DB insert
      name: name,
      email: email,
      phone: phone,
      currency: currency,
      date: state.date,
      time: state.time,
      pickup: state.pickup,
      dropoff: (state.mode === "hourly") ? "Mont-Tremblant (area)" : state.dropoff,
      triptype: (state.mode === "hourly") ? "hourly" : (state.transfer === "airport" ? "airport" : "point"),
      vehicle: chosen.name,
      vehicle_id: chosen.id,
      hours: String(hoursNum),
      roundtrip: "no",
      notes: val("c_notes"),
      estimate_text: (state.mode === "hourly")
        ? `Total ${formatMoney(chosen.total, currency)} for ${hoursNum} hour${hoursNum>1?"s":""}`
        : `${formatMoney(chosen.total, currency)} (${chosen.note})`,
      estimate_total: chosen.total,
      estimate_total_cad: chosen.total,
      pay_option: "full",
      pay_now: chosen.total,
      pay_now_cad: chosen.total
    };

    try{
      statusEl.textContent = "Saving your booking‚Ä¶";

      // 1) Save booking + send emails
      const saveRes = await fetch("/api/bookings", {
        method: "POST",
        headers: { "Content-Type":"application/json" },
        body: JSON.stringify(dbBooking)
      });
      const saveData = await saveRes.json().catch(()=> ({}));
      if (!saveRes.ok || !saveData?.ok) throw new Error(saveData?.error || "Unable to save booking.");
      checkoutBooking.booking_id = saveData.id;

      // 2) Start Stripe checkout (if endpoint exists)
      statusEl.textContent = "Starting secure checkout‚Ä¶";
      const res = await fetch("/api/create-checkout-session", {
        method: "POST",
        headers: { "Content-Type":"application/json" },
        body: JSON.stringify(checkoutBooking)
      });

      const data = await res.json().catch(()=> ({}));
      if (!res.ok) {
        // If Stripe endpoint isn't configured yet, show success message with booking ID
        statusEl.textContent = `Booking saved (ID: ${checkoutBooking.booking_id}). Payment setup is pending.`;
        alert(`Booking saved! Your booking ID is ${checkoutBooking.booking_id}. We'll contact you to confirm and take payment.`);
        return;
      }
      if (!data?.url) throw new Error("Missing checkout URL from server.");
      window.location.href = data.url;

    }catch(err){
      console.error(err);
      statusEl.textContent = "Checkout error: " + (err.message || "Unknown error");
      alert("Checkout error: " + (err.message || "Unknown error"));
    }
  }

  function setHeroSearchLoading(isLoading){
    const btn = $("heroSearchBtn");
    btn.disabled = isLoading;
    btn.textContent = isLoading ? "Loading‚Ä¶" : "Choose vehicle";
  }

  $("tabOneWay").addEventListener("click", ()=> setHeroMode("one_way"));
  $("tabHourly").addEventListener("click", ()=> setHeroMode("hourly"));
  $("clearSelectedVehicle").addEventListener("click", ()=> setPreferredVehicle(null));

  document.querySelectorAll(".reserve-btn").forEach(btn=>{
    btn.addEventListener("click", (e)=>{
      e.preventDefault();
      const vehicleId = btn.dataset.vehicle;
      const mode = btn.dataset.mode || "one_way";
      const url = new URL(window.location.href);
      url.searchParams.set("vehicle", vehicleId);
      url.searchParams.set("mode", mode);
      url.hash = "booking";
      window.location.href = url.toString();
    });
  });

  $("heroSearchForm").addEventListener("submit", (e)=>{
    e.preventDefault();
    clearHeroAlert();

    const err = validateHero();
    if (err) return showHeroAlert(err);

    // Collect latest inputs
    state.pickup = val("h_pickup");
    state.dropoff = val("h_dropoff");
    state.date = $("h_date").value;
    state.time = val("h_time");
    state.transfer = val("h_transfer") || "point";
    state.hours = Math.max(1, Number(val("h_hours") || 1));

    // capture coords (if user picked from suggestions)
    state.pickup_lat = val("h_pickup_lat");
    state.pickup_lng = val("h_pickup_lng");
    state.dropoff_lat = val("h_dropoff_lat");
    state.dropoff_lng = val("h_dropoff_lng");

    setHeroSearchLoading(true);

    try {
      state.computedVehicles = buildVehiclesForTrip();
      renderTripSummary();
      renderVehiclesOverlay();
      openOverlay("overlayVehicles", true);
    } catch (ex) {
      console.error("Choose vehicle failed:", ex);
      showHeroAlert("Something went wrong while loading vehicles. Please refresh and try again.");
    } finally {
      setHeroSearchLoading(false);
    }
  });

  window.addEventListener("load", ()=>{
    if (!history.state){
      history.replaceState({ page: "home" }, "", location.pathname + location.search + (location.hash || ""));
    }

    syncViewportHeight();
    buildTimeOptions(5, "h_time");

    // ‚úÖ Works for both one-way + hourly (pickup) and one-way dropoff
    setupAutocomplete("h_pickup", "h_pickup_list", "h_pickup_lat", "h_pickup_lng");
    setupAutocomplete("h_dropoff", "h_dropoff_list", "h_dropoff_lat", "h_dropoff_lng");

    const d = new Date();
    const yyyy = d.getFullYear();
    const mm = String(d.getMonth()+1).padStart(2,"0");
    const dd = String(d.getDate()).padStart(2,"0");
    $("h_date").value = `${yyyy}-${mm}-${dd}`;

    const params = new URLSearchParams(window.location.search);
    const preferredVehicle = params.get("vehicle");
    const preferredMode = params.get("mode");
    if (preferredVehicle){
      setHeroMode(preferredMode || "one_way");
      setPreferredVehicle(preferredVehicle);
      window.__estimateVehicleId = preferredVehicle;
      document.getElementById("booking")?.scrollIntoView({ behavior: "smooth", block: "start" });
      setTimeout(()=> $("h_pickup")?.focus(), 300);
    }else{
      setHeroMode("one_way");
      setPreferredVehicle(null);
      window.__estimateVehicleId = "escalade";
    }
    document.getElementById("year").textContent = yyyy;

    if (location.hash === "#overlayVehicles") openOverlay("overlayVehicles", false);
    if (location.hash === "#overlayCheckout") openOverlay("overlayCheckout", false);
  });
</script>
<!--Start of Tawk.to Script-->
<!--End of Tawk.to Script-->
<!-- Google Places + Map (optional) -->
<script>
/**
 * Paste your real key below.
 * Keep it restricted in Google Cloud Console (HTTP referrer + only Places API + Maps JavaScript API).
 */
const GOOGLE_MAPS_BROWSER_KEY = "AIzaSyB1v_rHuYsxchwEIrY6a4_v3PU3XH5zrp8"; // paste your browser key here

window.googlePlacesEnabled = false;
let gMap = null;
let pickupMarker = null;
let dropoffMarker = null;
let directionsService = null;
let directionsRenderer = null;

// Known airports (add more anytime)
const KNOWN_AIRPORTS = [
  { code: "YUL", name: "Montr√©al‚ÄìTrudeau International Airport", lat: 45.457714, lng: -73.749908 },
  { code: "YOW", name: "Ottawa International Airport", lat: 45.3225, lng: -75.6692 },
  { code: "YTZ", name: "Toronto Billy Bishop Airport", lat: 43.6275, lng: -79.3962 },
  { code: "YYZ", name: "Toronto Pearson International Airport", lat: 43.6777, lng: -79.6248 }
];

// Pricing knobs (point-to-point estimate)
const PRICING = {
  base: 25,        // CAD
  perKm: 2.40,     // CAD per km
  perMin: 0.55,    // CAD per minute
  minFare: 95,     // minimum booking estimate
  airportSurcharge: 15
};

function haversineKm(lat1, lon1, lat2, lon2){
  const R = 6371;
  const toRad = (d)=> d * Math.PI / 180;
  const dLat = toRad(lat2-lat1);
  const dLon = toRad(lon2-lon1);
  const a =
    Math.sin(dLat/2)**2 +
    Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) * Math.sin(dLon/2)**2;
  return 2 * R * Math.asin(Math.sqrt(a));
}

function detectAirport(lat, lng){
  let best = null;
  let bestKm = Infinity;
  for (const a of KNOWN_AIRPORTS){
    const km = haversineKm(lat, lng, a.lat, a.lng);
    if (km < bestKm){
      bestKm = km;
      best = a;
    }
  }
  // within ~2.5km counts as airport pickup/dropoff
  if (best && bestKm <= 2.5) return best;
  return null;
}

function fmtDistance(m){
  if (!Number.isFinite(m)) return "‚Äî";
  const km = m/1000;
  return km >= 10 ? `${km.toFixed(0)} km` : `${km.toFixed(1)} km`;
}
function fmtDuration(s){
  if (!Number.isFinite(s)) return "‚Äî";
  const min = Math.round(s/60);
  const h = Math.floor(min/60);
  const m = min%60;
  if (h <= 0) return `${m} min`;
  return `${h}h ${m}m`;
}
function roundTo(x, step){
  return Math.round(x/step)*step;
}
function computePrice(distanceM, durationS, pickupAirport, dropoffAirport){
  // Step 1 should show "Starts from" using Tesla pricing (as requested)
  try{
    const vId = "tesla";
    if (typeof vehiclePriceEstimate === "function") {
      return vehiclePriceEstimate(vId, distanceM||0, durationS||0);
    }
  }catch(e){}
  // Fallback (shouldn't happen)
  const km = (distanceM||0)/1000;
  const travelHours = (durationS||0)/3600;
  return Math.round((travelHours*75) + (km*0.25));
}

function setRouteUI({distanceM=null, durationS=null, price=null, badges=[]}={}){
  const dEl = document.getElementById("riDistance");
  const tEl = document.getElementById("riDuration");
  const pEl = document.getElementById("riPrice");
  const bEl = document.getElementById("riBadges");
  if (dEl) dEl.textContent = (distanceM==null? "‚Äî" : fmtDistance(distanceM));
  if (tEl) tEl.textContent = (durationS==null? "‚Äî" : fmtDuration(durationS));
  if (pEl) pEl.textContent = (price==null? "‚Äî" : `CA$${Number(price).toFixed(0)}`);
  if (bEl){
    bEl.innerHTML = "";
    (badges||[]).forEach((txt)=>{
      const chip = document.createElement("div");
      chip.className = "ri-badge";
      chip.textContent = txt;
      bEl.appendChild(chip);
    });
  }
}

function ensureDirections(){
  const map = ensureMap();
  if (!map || !window.google || !google.maps) return null;
  if (!directionsService) directionsService = new google.maps.DirectionsService();
  if (!directionsRenderer){
    directionsRenderer = new google.maps.DirectionsRenderer({
      map,
      suppressMarkers: true,
      preserveViewport: true
    });
  } else {
    directionsRenderer.setMap(map);
  }
  return { directionsService, directionsRenderer };
}

function getLatLngFromHidden(prefix){
  const lat = Number((document.getElementById(`h_${prefix}_lat`)||{}).value);
  const lng = Number((document.getElementById(`h_${prefix}_lng`)||{}).value);
  if (!Number.isFinite(lat) || !Number.isFinite(lng)) return null;
  return { lat, lng };
}

function updateRouteAndEstimate(){
  const p = getLatLngFromHidden("pickup");
  const d = getLatLngFromHidden("dropoff");
  if (!p || !d){
    // Clear route UI when incomplete
    setRouteUI({distanceM:null, durationS:null, price:null, badges:[]});
    const dr = document.getElementById("h_distance_m"); if (dr) dr.value = "";
    const du = document.getElementById("h_duration_s"); if (du) du.value = "";
    const pe = document.getElementById("h_price_estimate"); if (pe) pe.value = "";
    return;
  }

  // Airport detection
  const pA = detectAirport(p.lat, p.lng);
  const dA = detectAirport(d.lat, d.lng);
  const badges = [];
  if (pA) badges.push(`Pickup: ${pA.code}`);
  if (dA) badges.push(`Dropoff: ${dA.code}`);
  const hPA = document.getElementById("h_pickup_airport"); if (hPA) hPA.value = pA ? pA.code : "";
  const hDA = document.getElementById("h_dropoff_airport"); if (hDA) hDA.value = dA ? dA.code : "";

  const ds = ensureDirections();
  if (!ds) return;

  ds.directionsService.route(
    {
      origin: p,
      destination: d,
      travelMode: google.maps.TravelMode.DRIVING
    },
    (result, status) => {
      if (status !== "OK" || !result || !result.routes || !result.routes[0] || !result.routes[0].legs || !result.routes[0].legs[0]){
        console.warn("Directions failed:", status);
        setRouteUI({distanceM:null, durationS:null, price:null, badges});
        return;
      }
      ds.directionsRenderer.setDirections(result);

      const leg = result.routes[0].legs[0];
      const distanceM = leg.distance ? leg.distance.value : null;
      const durationS = leg.duration ? leg.duration.value : null;

      const price = computePrice(distanceM||0, durationS||0, !!pA, !!dA);
      setRouteUI({distanceM, durationS, price, badges});

      const dr = document.getElementById("h_distance_m"); if (dr) dr.value = String(distanceM ?? "");
      const du = document.getElementById("h_duration_s"); if (du) du.value = String(durationS ?? "");
      const pe = document.getElementById("h_price_estimate"); if (pe) pe.value = String(price ?? "");
    }
  );
}


function ensureMap(){
  try{
    if (!window.google || !google.maps || typeof google.maps.Map !== "function") return null;
  const el = document.getElementById("gmap");
  if (!el) return null;
  if (gMap) return gMap;

  // Default center near Montreal
  gMap = new google.maps.Map(el, {
    center: { lat: 45.5019, lng: -73.5674 },
    zoom: 10,
    mapTypeControl: false,
    streetViewControl: false,
    fullscreenControl: false,
  });
  const ld=document.getElementById('gmap-loading'); if(ld) ld.style.display='none';
  return gMap;
  }catch(e){ console.warn("ensureMap failed", e); return null; }
}

function setMarker(kind, lat, lng, title){
  const map = ensureMap();
  if (!map) return;

  const pos = { lat, lng };
  map.panTo(pos);

  const markerOptions = { position: pos, map, title: title || "" };
  if (kind === "pickup"){
    if (pickupMarker) pickupMarker.setMap(null);
    pickupMarker = new google.maps.Marker(markerOptions);
  } else {
    if (dropoffMarker) dropoffMarker.setMap(null);
    dropoffMarker = new google.maps.Marker(markerOptions);
  }

  // If both are set, fit bounds
  if (pickupMarker && dropoffMarker){
    const bounds = new google.maps.LatLngBounds();
    bounds.extend(pickupMarker.getPosition());
    bounds.extend(dropoffMarker.getPosition());
    map.fitBounds(bounds, 60);
  } else {
    map.setZoom(13);
  }

  // Update route estimate if both endpoints exist
  try { updateRouteAndEstimate(); } catch(e) {}
}

function findBookingInputs() {
  // Prefer the hero booking inputs used on this page
  const byId = (id) => document.getElementById(id);

  const pickup =
    byId("h_pickup") ||
    byId("pickup") || byId("from") || byId("fromInput") || byId("pickupInput") ||
    document.querySelector('input[placeholder*="Pick up" i]') ||
    document.querySelector('input[placeholder*="Pickup" i]') ||
    document.querySelector('input[placeholder*="From" i]') ||
    document.querySelector('input[aria-label*="From" i]') ||
    document.querySelector('input[name*="from" i]') ||
    document.querySelectorAll("input[type=text]")[0];

  const dropoff =
    byId("h_dropoff") ||
    byId("dropoff") || byId("to") || byId("toInput") || byId("dropoffInput") ||
    document.querySelector('input[placeholder*="Drop" i]') ||
    document.querySelector('input[placeholder*="To" i]') ||
    document.querySelector('input[aria-label*="To" i]') ||
    document.querySelector('input[name*="to" i]') ||
    document.querySelectorAll("input[type=text]")[1];

  return { pickup, dropoff };
}



function getQcCorridorBounds(){
  // Broad bounds covering Canada + USA (bias only; not strict)
  const sw = new google.maps.LatLng(24.396308, -168.0); // southern US, west (incl. Alaska)
  const ne = new google.maps.LatLng(83.1139, -52.0);   // northern Canada, east
  return new google.maps.LatLngBounds(sw, ne);
}

function wireAutocomplete(){
  // Prevent double-wiring
  if (window.__placesWired) return;



  if (!window.google || !google.maps || !google.maps.places) return;

  const { pickup: pickupInput, dropoff: dropoffInput } = findBookingInputs();
  if (pickupInput) pickupInput.setAttribute('data-which','pickup');
  if (dropoffInput) dropoffInput.setAttribute('data-which','dropoff');
if (!pickupInput || !dropoffInput) return;

  const options = {
    componentRestrictions: { country: ["ca","us"] },
    bounds: getQcCorridorBounds(),
    strictBounds: false,
    fields: ["name", "formatted_address", "geometry"]
  };

  const pickupAC = new google.maps.places.Autocomplete(pickupInput, options);
  
tuneAutocomplete(pickupAC);
const dropoffAC = new google.maps.places.Autocomplete(dropoffInput, options);

  
tuneAutocomplete(dropoffAC);

  pickupAC.addListener("place_changed", () => {
    const p = pickupAC.getPlace();
    if (!p || !p.geometry) return;

    const lat = p.geometry.location.lat();
    const lng = p.geometry.location.lng();

    const display = p.name ? (p.formatted_address ? `${p.name}, ${p.formatted_address}` : p.name) : (p.formatted_address || "");
    if (display) pickupInput.value = display;

    const hLat = document.getElementById("h_pickup_lat");
    const hLng = document.getElementById("h_pickup_lng");
    if (hLat) hLat.value = lat;
    if (hLng) hLng.value = lng;

    // Clear your custom list if present
    const list = document.getElementById("h_pickup_list");
    if (list) list.innerHTML = "";

    setMarker("pickup", lat, lng, display);
    try { updateRouteAndEstimate(); } catch(e) {}
  });

  dropoffAC.addListener("place_changed", () => {
    const p = dropoffAC.getPlace();
    if (!p || !p.geometry) return;

    const lat = p.geometry.location.lat();
    const lng = p.geometry.location.lng();

    const display = p.name ? (p.formatted_address ? `${p.name}, ${p.formatted_address}` : p.name) : (p.formatted_address || "");
    if (display) dropoffInput.value = display;

    const hLat = document.getElementById("h_dropoff_lat");
    const hLng = document.getElementById("h_dropoff_lng");
    if (hLat) hLat.value = lat;
    if (hLng) hLng.value = lng;

    const list = document.getElementById("h_dropoff_list");
    if (list) list.innerHTML = "";

    setMarker("dropoff", lat, lng, display);
    try { updateRouteAndEstimate(); } catch(e) {}
  });
  // Re-enable inputs now that Google Places is ready.
  try {
    pickupInput.disabled = false;
    dropoffInput.disabled = false;

    // Restore placeholders if we temporarily changed them during script load.
    [pickupInput, dropoffInput].forEach((el) => {
      if (!el) return;
      if (el.dataset && el.dataset.prevPlaceholder !== undefined) {
        el.setAttribute("placeholder", el.dataset.prevPlaceholder || "");
        delete el.dataset.prevPlaceholder;
      } else if ((el.getAttribute("placeholder") || "").includes("Loading Google suggestions")) {
        el.setAttribute("placeholder", "");
      }
      if (el.dataset) delete el.dataset.placesPending;
    });


    // If the user typed before Places finished loading, nudging focus will cause suggestions to appear immediately.
    const nudge = (el) => {
      if (!el) return;
      const v = (el.value || "").trim();
      if (v.length < 2) return;
      setTimeout(() => {
        try {
          const wasActive = (document.activeElement === el);
          if (wasActive) el.blur();
          el.focus();
        } catch(e) {}
      }, 0);
    };
    nudge(pickupInput);
    nudge(dropoffInput);
  } catch(e) {}

  window.googlePlacesEnabled = true;
  window.__placesWired = true;

  
  // Initialize map immediately (prevents blank map area)
  try { ensureMap(); } catch(e) {}
// Make sure the map initializes even before selecting
  ensureMap();
}


function restoreInputs() {
  try {
    const { pickup: _p, dropoff: _d } = findBookingInputs();
    [_p, _d].forEach((el) => {
      if (!el) return;
      el.disabled = false;
      // restore placeholder if we temporarily changed it
      if (el.dataset && el.dataset.prevPlaceholder !== undefined) {
        el.setAttribute("placeholder", el.dataset.prevPlaceholder || "");
        delete el.dataset.prevPlaceholder;
      } else if ((el.getAttribute("placeholder") || "").includes("Loading Google suggestions")) {
        // safety fallback
        el.setAttribute("placeholder", "");
      }
      if (el.dataset) delete el.dataset.placesPending;
    });
  } catch (e) {}
}


function loadGoogleMapsScript() {
  const el = document.getElementById("gmap-loading");

  // If key is missing, don't block the UI
  if (!GOOGLE_MAPS_BROWSER_KEY || GOOGLE_MAPS_BROWSER_KEY.includes("PASTE_")) {
    if (el) el.textContent = "Google Maps browser key not set ‚Äî using basic address search.";
    restoreInputs();
    return;
  }

  // If google + places already available, init immediately
  if (window.google && window.google.maps && window.google.maps.places) {
    try {
      ensureMap();
      wireAutocomplete();
    } catch (e) {
      console.warn("Google already loaded but init failed", e);
    } finally {
      restoreInputs();
    }
    return;
  }

  // If script tag already exists, don't add another ‚Äî but DO start a watchdog
  const existing = document.querySelector('script[data-google-maps="1"]');
  if (existing) {
    startPlacesWatchdog();
    return;
  }

  // Disable inputs until Places is ready
  try {
    const { pickup: _p, dropoff: _d } = findBookingInputs();
    [_p, _d].forEach((inp) => {
      if (!inp) return;
      inp.dataset.placesPending = "1";
      inp.dataset.prevPlaceholder = inp.getAttribute("placeholder") || "";
      inp.setAttribute("placeholder", "Loading Google suggestions...");
      inp.disabled = true;
    });
  } catch (e) {}

  // Google will call this when the JS API is ready
  window.__initGoogleMapsPlaces = () => {
    try {
      ensureMap();                 // create the map now that google exists
      wireAutocomplete();
    } catch (e) {
      console.warn("Google init failed", e);
    } finally {
      restoreInputs();             // always unlock
    }
  };

  const s = document.createElement("script");
  s.dataset.googleMaps = "1";
  s.async = true;
  s.defer = true;
  s.src = `https://maps.googleapis.com/maps/api/js?key=${encodeURIComponent(GOOGLE_MAPS_BROWSER_KEY)}&v=weekly&libraries=places&loading=async&callback=__initGoogleMapsPlaces`;

  // BACKSTOP: Safari sometimes doesn't fire callback reliably ‚Äî onload will
  s.onload = () => {
    try {
      // If callback didn't run, this will initialize map + autocomplete
      if (window.google && window.google.maps) {
        if (typeof window.__initGoogleMapsPlaces === "function") {
          window.__initGoogleMapsPlaces();
        } else {
          // At least render map
          ensureMap();
        }
      }
    } catch (e) {
      console.warn("Google onload init failed", e);
      restoreInputs();
    }
  };

  s.onerror = () => {
    console.warn("Google Maps failed to load (key/billing/referrer/APIs). Falling back.");
    if (el) el.textContent = "Map failed to load ‚Äî using basic address search.";
    restoreInputs();               // IMPORTANT: unlock on failure
  };

  document.head.appendChild(s);

  // WATCHDOG: never allow ‚ÄúLoading Google suggestions‚Ä¶‚Äù to stay forever
  startPlacesWatchdog();

  function startPlacesWatchdog() {
    window.__placesWatchdogStarted = window.__placesWatchdogStarted || false;
    if (window.__placesWatchdogStarted) return;
    window.__placesWatchdogStarted = true;

    setTimeout(() => {
      const { pickup: _p, dropoff: _d } = findBookingInputs();
      const pending =
        (_p && _p.dataset && _p.dataset.placesPending) ||
        (_d && _d.dataset && _d.dataset.placesPending);

      if (!pending) return;

      if (window.google && window.google.maps && window.google.maps.places) {
        try {
          if (typeof window.__initGoogleMapsPlaces === "function") window.__initGoogleMapsPlaces();
        } catch (e) {
          restoreInputs();
        }
      } else {
        if (el) el.textContent = "Google Places not available ‚Äî using basic address search.";
        restoreInputs();
      }
    }, 6000);
  }
}

// Load after DOM is ready
document.addEventListener("DOMContentLoaded", () => {
  // Disable inputs briefly until Google Places wiring is ready.
  // This prevents the "type, no suggestions, click again" behavior when users type before Places finishes loading.
  try {
    const { pickup, dropoff } = findBookingInputs();
    if (pickup) pickup.disabled = true;
    if (dropoff) dropoff.disabled = true;
  } catch(e) {}

  // Mobile keyboard UX
  try {
    const { pickup, dropoff } = findBookingInputs();
    [pickup, dropoff].forEach((el)=>{
      if (!el) return;
      el.setAttribute("inputmode","search");
      el.setAttribute("enterkeyhint","next");
      el.setAttribute("autocapitalize","none");
      el.setAttribute("autocomplete","off");
      el.setAttribute("autocorrect","off");
      el.setAttribute("spellcheck","false");
    });
  } catch(e) {}

  // Initial UI state
  try { setRouteUI({distanceM:null, durationS:null, price:null, badges:[]}); } catch(e) {}

  ensureMap();         // show the empty map area (placeholder background if Google not loaded)
  loadGoogleMapsScript();
});
</script>
<script>
// --- Autocomplete tuning (faster + more accurate) ---
function tuneAutocomplete(ac) {
  if (!ac) return;
  // Restrict results to Canada (remove if you want worldwide)
  ac.setComponentRestrictions({ country: ["ca","us"] });
  // Ask only for what we need (reduces payload and speeds response)
  if (ac.setFields) ac.setFields(["place_id", "formatted_address", "geometry", "name"]);
  // Prefer establishments (hotels/businesses) + addresses
  // Leave types unrestricted so hotels/businesses + addresses both appear
}
// --- Google Places performance helpers ---
// --- Server-backed Places (fast with Vercel caching) ---
let __acAbort = null;

async function fetchPredictions(query) {
  const q = (query || "").trim();
  if (q.length < 2) return [];
  const ck = q.toLowerCase();
  const cached = cacheGet(ck);
  if (cached) return cached;

  try {
    if (__acAbort) __acAbort.abort();
    __acAbort = new AbortController();

    const r = await fetch(`/api/places-autocomplete?q=${encodeURIComponent(q)}`, { signal: __acAbort.signal });
    if (!r.ok) return [];
    const data = await r.json();
    const preds = (data.predictions || []).map(p => ({
      place_id: p.place_id,
      description: p.description,
      structured_formatting: p.structured_formatting
    }));
    cacheSet(ck, preds);
    return preds;
  } catch (e) {
    if (e && e.name === "AbortError") return [];
    console.warn("autocomplete fetch failed", e);
    return [];
  }
}

async function fetchPlaceDetails(placeId) {
  if (!placeId) return null;
  try {
    const r = await fetch(`/api/place-details?placeId=${encodeURIComponent(placeId)}`);
    if (!r.ok) return null;
    const data = await r.json();
    const result = data.result;
    if (!result || !result.geometry || !result.geometry.location) return null;
    return {
      name: result.name,
      formatted_address: result.formatted_address,
      lat: result.geometry.location.lat,
      lng: result.geometry.location.lng
    };
  } catch (e) {
    console.warn("place details fetch failed", e);
    return null;
  }
}
// --- Perceived speed helpers (instant UI) ---
const __lastPredictions = { pickup: [], dropoff: [] };
function showLoading(listEl){
  if (!listEl) return;
  listEl.innerHTML = '<div class="autocomplete-item" style="opacity:.7">Searching‚Ä¶</div>';
  listEl.style.display = "block";
}
function showInstantLast(which, listEl, inputEl){
  const preds = __lastPredictions[which] || [];
  if (preds.length) {
    // Render immediately while new request is in flight
    if (typeof renderSuggestions === "function") renderSuggestions(preds, listEl, inputEl);
    else if (typeof renderGoogleSuggestions === "function") renderGoogleSuggestions(preds, listEl, inputEl);
  } else {
    showLoading(listEl);
  }
}
const __placesCache = new Map(); // key -> {ts, preds}
const __CACHE_TTL_MS = 30_000;

function cacheGet(key){
  const v = __placesCache.get(key);
  if (!v) return null;
  if (Date.now() - v.ts > __CACHE_TTL_MS) { __placesCache.delete(key); return null; }
  return v.preds;
}
function cacheSet(key, preds){
  __placesCache.set(key, { ts: Date.now(), preds });
  // keep cache small
  if (__placesCache.size > 50) {
    const firstKey = __placesCache.keys().next().value;
    __placesCache.delete(firstKey);
  }
}

let __sessionToken = null;
function newSessionToken(){
  try { __sessionToken = new google.maps.places.AutocompleteSessionToken(); } catch(e) { __sessionToken = null; }
  return __sessionToken;
}

function getQcCorridorBounds(){
  // Broad bounds covering Canada + USA (bias only; not strict)
  const sw = new google.maps.LatLng(24.396308, -168.0); // southern US, west (incl. Alaska)
  const ne = new google.maps.LatLng(83.1139, -52.0);   // northern Canada, east
  return new google.maps.LatLngBounds(sw, ne);
}

</script>
<script>
  // Contact form -> opens user's email app with a pre-filled message
  function sendContactEmail(){
    const lang = (document.documentElement.getAttribute("lang") || "en").toLowerCase().startsWith("fr") ? "fr" : "en";
    const name = document.getElementById("cf_name")?.value || "";
    const email = document.getElementById("cf_email")?.value || "";
    const message = document.getElementById("cf_message")?.value || "";

    const subject = (lang === "fr") ? "Demande du client" : "Customer Inquiry";
    const body = (lang === "fr")
      ? `Bonjour Mont Tremblant Limo Services,\n\nNom: ${name}\nCourriel: ${email}\n\nMessage:\n${message}\n\n`
      : `Hello Mont Tremblant Limo Services,\n\nName: ${name}\nEmail: ${email}\n\nMessage:\n${message}\n\n`;

    const mailto =
      "mailto:info@monttremblantlimoservices.com"
      + "?subject=" + encodeURIComponent(subject)
      + "&body=" + encodeURIComponent(body);

    window.location.href = mailto;
  }

  // --- Simple i18n (EN/FR) ---
  const I18N = {
    en: {
      srv_routes_h2: "Popular City-to-City Routes",
      srv_routes_sub: "Private transportation between Montr√©al, Mont-Tremblant, and major cities.",
      srv_rt1: "Ski resort transfers ‚Ä¢ Door-to-door",
      srv_rt2: "Business & government travel",
      srv_rt3: "Private long-distance chauffeur",
      srv_rt4: "Hotels ‚Ä¢ Events ‚Ä¢ Old Qu√©bec",
      srv_rt5: "VIP cross-border trips",
      srv_rt6: "Arrivals ‚Ä¢ Departures ‚Ä¢ Meet & greet",

      brand_name: "Mont Tremblant Limo",

      nav_fleet: "Our fleet",
      nav_routes: "Destinations",
      nav_faq: "FAQ",
      nav_contact: "Contact",
      nav_whatsapp: "WhatsApp",

      hero_title: "Luxury chauffeur service in Mont-Tremblant",
      hero_sub: "Airport transfers, hourly bookings, ski trips, corporate travel and special events.",

      badge_247: "24/7 booking",
      badge_pro: "Professional chauffeurs",
      badge_premium: "Premium vehicles",
      badge_cities: "Mont-Tremblant ‚Ä¢ Montr√©al ‚Ä¢ Ottawa",

      tab_oneway: "One way",
      tab_hourly: "By the hour (min 1h)",
      tab_hint_html: "Need a chauffeur for events, shopping or a night out? Choose <b>By the hour</b> (minimum 1 hour).",
      step_1of3: "Step 1 of 3",

      ph_from: "From: address, airport, hotel‚Ä¶",
      ph_to: "To: address, airport, hotel‚Ä¶",
      map_loading: "Loading map‚Ä¶",

      opt_point: "City / Point-to-point",
      opt_airport: "Airport transfer",

      ri_distance: "Distance",
      ri_duration: "Estimated time",
      ri_price: "Starts from",
      note_pro: "Professional chauffeur ‚Ä¢ clean premium vehicles.",
      btn_choose_vehicle: "Choose vehicle",

      ov_title_booking: "Mont Tremblant Limo ‚Ä¢ Booking",
      ov_title_checkout: "Mont Tremblant Limo ‚Ä¢ Checkout",
      veh_step_search: "Search",
      veh_step_class: "Service Class",
      veh_step_checkout: "Checkout",
      chk_step_search: "Search",
      chk_step_class: "Service Class",
      chk_step_checkout: "Checkout",

      ov_select_vehicle: "Select a vehicle",
      ov_prices_est: "Prices shown are estimates.",
      btn_edit_search: "Edit search",
      btn_continue: "Continue",

      ov_your_details: "Your details",
      ov_details_sub_html: "Enter your details. We will email you a ‚Äúrequest received‚Äù confirmation, then you can pay securely via Stripe.",
      lbl_name: "Name",
      lbl_phone: "Phone",
      lbl_email: "Email",
      lbl_passengers: "Passengers (optional)",
      lbl_luggage: "Luggage (optional)",
      lbl_notes: "Notes (optional)",
      ph_name: "Your name",
      ph_phone: "+1 ...",
      ph_email: "you@example.com",
      ph_passengers: "e.g., 2",
      ph_luggage: "e.g., 2",
      ph_notes: "Passengers, luggage, flight #, stops‚Ä¶",
      ph_message: "Your message" ,
      lbl_total_est: "Total estimate",
      btn_back: "Back",
      btn_pay_stripe: "Pay with Stripe",
      btn_whatsapp: "WhatsApp",
      btn_close: "Close",

      fleet_title: "Our Fleet",
      fleet_sub_html: "Premium vehicles for Mont-Tremblant travel. <b>Minimum 1 hour (hourly)</b> applies to all vehicles.",
      unit_hour: "hour",
      min_hours_html: "{n}-hour minimum",

      btn_reserve_point: "Reserve Point A to Point B",
      btn_reserve_hourly: "Reserve by hour",

      contact_title: "Contact Us",
      contact_sub: "Questions, bookings, or custom trips ‚Äî contact us anytime.",
      contact_getintouch: "Get in touch",
      contact_sendmsg: "Send us a message",
      contact_sendbtn: "Send Message",
      services_page_title: "Services",
      services_page_sub: "Services de chauffeur de luxe √† Montr√©al, Mont‚ÄëTremblant et vers les principaux a√©roports. Trajets point‚Äë√†‚Äëpoint, √† l‚Äôheure et sur mesure.",
      services_categories: "Services populaires",
      services_routes: "Trajets interurbains & itin√©raires populaires",
      svc_airport: "Transport a√©roportuaire",
      svc_corporate: "Transport corporatif",
      svc_wedding: "Transport de mariage",
      svc_graduation: "Transport de graduation",
      svc_event: "Transport d‚Äô√©v√©nements",
      svc_hourly: "Chauffeur √† l‚Äôheure",
      svc_city: "Transport interurbain",
      svc_ski: "Transferts vers les stations de ski",
      svc_hotel: "Transferts h√¥tels & resorts",
      svc_group: "Transport de groupes (Sprinter / vans)",
      svc_vip: "Service VIP & ex√©cutif",
      route_mtl_ottawa: "Service limousine Montr√©al ‚Üí Ottawa",
      route_mtl_ny: "Service limousine Montr√©al ‚Üí New York",
      route_mtl_tremblant: "Service limousine Montr√©al ‚Üí Mont‚ÄëTremblant",
      route_mtl_qc: "Service limousine Montr√©al ‚Üí Qu√©bec",
      route_mtl_toronto: "Service limousine Montr√©al ‚Üí Toronto",
      services_cta_book: "R√©server en ligne",
      services_cta_quote: "Demander un prix",
      services_page_title: "Services",
      services_page_sub: "Luxury chauffeur services across Montr√©al, Mont‚ÄëTremblant, and all major airports. Point‚Äëto‚Äëpoint, hourly, and custom trips.",
      services_categories: "Popular services",
      services_routes: "City‚Äëto‚Äëcity & popular routes",
      svc_airport: "Airport transportation",
      svc_corporate: "Corporate transportation",
      svc_wedding: "Wedding transportation",
      svc_graduation: "Graduation transportation",
      svc_event: "Event transportation",
      svc_hourly: "Hourly chauffeur",
      svc_city: "City‚Äëto‚Äëcity transportation",
      svc_ski: "Ski resort transfers",
      svc_hotel: "Hotel & resort transfers",
      svc_group: "Group transportation (Sprinter / vans)",
      svc_vip: "VIP & executive service",
      route_mtl_ottawa: "Montr√©al to Ottawa limousine service",
      route_mtl_ny: "Montr√©al to New York limousine service",
      route_mtl_tremblant: "Montr√©al to Mont‚ÄëTremblant limousine service",
      route_mtl_qc: "Montr√©al to Qu√©bec City limousine service",
      route_mtl_toronto: "Montr√©al to Toronto limousine service",
      services_cta_book: "Book online",
      services_cta_quote: "Get a quote",

      footer_brand: "Mont Tremblant Limo Services",
      footer_tagline: "Luxury chauffeur service in Mont-Tremblant",
      footer_contact: "Contact",
      footer_rights: "All rights reserved",

      sticky_call: "Call",
      sticky_email: "Email",
      sticky_whatsapp: "WhatsApp"
    },

    fr: {
      srv_routes_h2: "Trajets populaires entre villes",
      srv_routes_sub: "Transport priv√© entre Montr√©al, Mont-Tremblant et les grandes villes.",
      srv_rt1: "Transferts ski ‚Ä¢ Porte-√†-porte",
      srv_rt2: "Affaires & gouvernement",
      srv_rt3: "Chauffeur longue distance",
      srv_rt4: "H√¥tels ‚Ä¢ √âv√©nements ‚Ä¢ Vieux-Qu√©bec",
      srv_rt5: "VIP transfrontalier",
      srv_rt6: "Arriv√©es ‚Ä¢ D√©parts ‚Ä¢ Accueil",

      brand_name: "Mont Tremblant Limo",

      nav_fleet: "Notre flotte",
      nav_routes: "Destinations",
      nav_faq: "FAQ",
      nav_contact: "Contact",
      nav_whatsapp: "WhatsApp",

      hero_title: "Service de chauffeur de luxe √† Mont-Tremblant",
      hero_sub: "Transferts a√©roport, r√©servations √† l‚Äôheure, sorties ski, voyages corporatifs et √©v√©nements sp√©ciaux.",

      badge_247: "R√©servation 24/7",
      badge_pro: "Chauffeurs professionnels",
      badge_premium: "V√©hicules haut de gamme",
      badge_cities: "Mont-Tremblant ‚Ä¢ Montr√©al ‚Ä¢ Ottawa",

      tab_oneway: "Aller simple",
      tab_hourly: "√Ä l‚Äôheure (min 1 h)",
      tab_hint_html: "Besoin d‚Äôun chauffeur pour un √©v√©nement, du magasinage ou une sortie? Choisissez <b>√Ä l‚Äôheure</b> (minimum 1 h).",
      step_1of3: "√âtape 1 sur 3",

      ph_from: "De : adresse, a√©roport, h√¥tel‚Ä¶",
      ph_to: "Vers : adresse, a√©roport, h√¥tel‚Ä¶",
      map_loading: "Chargement de la carte‚Ä¶",

      opt_point: "Ville / Point √† point",
      opt_airport: "Transfert a√©roport",

      ri_distance: "Distance",
      ri_duration: "Dur√©e estim√©e",
      ri_price: "√Ä partir de",
      note_pro: "Chauffeur professionnel ‚Ä¢ v√©hicules premium impeccables.",
      btn_choose_vehicle: "Choisir un v√©hicule",

      ov_title_booking: "Mont Tremblant Limo ‚Ä¢ R√©servation",
      ov_title_checkout: "Mont Tremblant Limo ‚Ä¢ Paiement",
      veh_step_search: "Recherche",
      veh_step_class: "Cat√©gorie",
      veh_step_checkout: "Paiement",
      chk_step_search: "Recherche",
      chk_step_class: "Cat√©gorie",
      chk_step_checkout: "Paiement",

      ov_select_vehicle: "Choisissez un v√©hicule",
      ov_prices_est: "Les prix affich√©s sont des estimations.",
      btn_edit_search: "Modifier",
      btn_continue: "Continuer",

      ov_your_details: "Vos coordonn√©es",
      ov_details_sub_html: "Entrez vos informations. Nous vous enverrons un courriel de confirmation ¬´ demande re√ßue ¬ª, puis vous pourrez payer en toute s√©curit√© via Stripe.",
      lbl_name: "Nom",
      lbl_phone: "T√©l√©phone",
      lbl_email: "Courriel",
      lbl_passengers: "Passagers (optionnel)",
      lbl_luggage: "Bagages (optionnel)",
      lbl_notes: "Notes (optionnel)",
      ph_name: "Votre nom",
      ph_phone: "+1 ...",
      ph_email: "vous@exemple.com",
      ph_passengers: "ex. 2",
      ph_luggage: "ex. 2",
      ph_notes: "Passagers, bagages, no de vol, arr√™ts‚Ä¶",
      ph_message: "Votre message" ,
      lbl_total_est: "Estimation totale",
      btn_back: "Retour",
      btn_pay_stripe: "Payer avec Stripe",
      btn_whatsapp: "WhatsApp",
      btn_close: "Fermer",

      fleet_title: "Notre flotte",
      fleet_sub_html: "V√©hicules haut de gamme pour Mont-Tremblant. <b>Minimum 1 heure (√† l‚Äôheure)</b> s‚Äôapplique √† tous les v√©hicules.",
      unit_hour: "heure",
      min_hours_html: "Minimum {n} heures",

      btn_reserve_point: "R√©server point A √† point B",
      btn_reserve_hourly: "R√©server √† l‚Äôheure",

      contact_title: "Nous joindre",
      contact_sub: "Questions, r√©servations ou trajets sur mesure ‚Äî contactez-nous √† tout moment.",
      contact_getintouch: "Contact",
      contact_sendmsg: "Envoyez-nous un message",
      contact_sendbtn: "Envoyer",

      footer_brand: "Mont Tremblant Limo Services",
      footer_tagline: "Service de chauffeur de luxe √† Mont-Tremblant",
      footer_contact: "Contact",
      footer_rights: "Tous droits r√©serv√©s",

      sticky_call: "Appeler",
      sticky_email: "Courriel",
      sticky_whatsapp: "WhatsApp"
    
,
      nav_airports: "A√©roports",

      routes_title: "Trajets populaires",
      routes_sub: "Transferts porte-√†-porte √† Montr√©al, Mont‚ÄëTremblant et dans les Laurentides. Prise en charge √† l‚Äôa√©roport disponible.",
      route1_title: "Montr√©al ‚áÑ Mont‚ÄëTremblant",
      route1_desc: "Transferts priv√©s en VUS ou Sprinter pour le ski, les week‚Äëends et les √©v√©nements.",
      route2_title: "Transferts a√©roport YUL",
      route2_desc: "Prise en charge √† Montr√©al‚ÄìTrudeau (YUL) avec suivi de vol et ramassage √† la porte ou accueil.",
      route3_title: "Chauffeur √† Montr√©al",
      route3_desc: "Service √† l‚Äôheure pour r√©unions d‚Äôaffaires, restaurants et sorties.",
      learn_more: "En savoir plus",

      airports_title: "Prise en charge a√©roport simplifi√©e",
      airports_sub: "Nous desservons Montr√©al‚ÄìTrudeau (YUL), Mirabel (YMX) et les a√©roports √† proximit√© sur demande.",
      air1_title: "Suivi de vol",
      air1_desc: "Nous surveillons les retards et ajustons l‚Äôheure de prise en charge lorsque possible.",
      air2_title: "Accueil (optionnel)",
      air2_desc: "Ajoutez une pancarte √† votre nom √† l‚Äôint√©rieur du terminal si vous le souhaitez.",
      air3_title: "Bagages et skis",
      air3_desc: "Indiquez vos bagages/skis et nous vous proposons le bon v√©hicule.",

      areas_title: "Zones desservies",
      areas_sub: "Nous op√©rons √† Montr√©al et alentours, ainsi qu‚Äô√† Mont‚ÄëTremblant et pour les longues distances.",
      area1_title: "Montr√©al & alentours",
      area1_desc: "Montr√©al, Laval, Longueuil, Brossard, Ouest‚Äëde‚Äël‚Äô√éle, Rive‚ÄëSud, Rive‚ÄëNord.",
      area2_title: "Mont‚ÄëTremblant & Laurentides",
      area2_desc: "Mont‚ÄëTremblant, Saint‚ÄëSauveur, Sainte‚ÄëAgathe et les stations √† proximit√©.",
      area3_title: "A√©roports & interurbain",
      area3_desc: "YUL, YMX, Ottawa (YOW), Qu√©bec (YQB) et plus ‚Äî demandez un devis.",

      faq_title: "FAQ",
      faq_q1: "Offrez-vous des prises en charge √† l‚Äôa√©roport (YUL) ?",
      faq_a1: "Oui ‚Äî transferts priv√©s depuis Montr√©al‚ÄìTrudeau (YUL). Partagez votre num√©ro de vol et les d√©tails de ramassage.",
      faq_q2: "Puis-je r√©server un service √† l‚Äôheure √† Montr√©al ?",
      faq_a2: "Oui ‚Äî choisissez ¬´ √Ä l‚Äôheure ¬ª (minimum 1 heure). Des minimums par v√©hicule peuvent s‚Äôappliquer.",
      faq_q3: "Desservez-vous Mont‚ÄëTremblant toute l‚Äôann√©e ?",
      faq_a3: "Oui ‚Äî transferts et service chauffeur √† Mont‚ÄëTremblant toute l‚Äôann√©e (saison de ski, √©t√©, √©v√©nements).",
      faq_q4: "Comment puis-je payer ?",
      faq_a4: "Apr√®s votre demande, nous confirmons la disponibilit√© et envoyons un lien de paiement s√©curis√© Stripe."
    }
  };

  function applyLang(lang){
    const normalized = String(lang || "en").toLowerCase();
    const active = normalized.startsWith("fr") ? "fr" : "en";
    const dict = I18N[active];

    // textContent replacements
    document.querySelectorAll("[data-i18n]").forEach(el => {
      const key = el.getAttribute("data-i18n");
      if (key && dict[key] != null) el.textContent = dict[key];
    });

    // innerHTML replacements (for strings with <b>, quotes, etc.)
    document.querySelectorAll("[data-i18n-html]").forEach(el => {
      const key = el.getAttribute("data-i18n-html");
      let val = dict[key];
      if (val == null) return;

      // support {n} placeholder for hour minimum
      const n = el.getAttribute("data-hours");
      if (n) val = String(val).replace("{n}", n);

      el.innerHTML = val;
    });

    // placeholder replacements
    document.querySelectorAll("[data-i18n-placeholder]").forEach(el => {
      const key = el.getAttribute("data-i18n-placeholder");
      if (key && dict[key] != null) el.setAttribute("placeholder", dict[key]);
    });

    // toggle buttons
    document.querySelectorAll(".lang-btn").forEach(btn=>{
      const isOn = btn.dataset.lang === active;
      btn.classList.toggle("active", isOn);
      btn.setAttribute("aria-pressed", isOn ? "true" : "false");
    });

    try { localStorage.setItem("mtls_lang", active); } catch(e) {}
    document.documentElement.setAttribute("lang", active);
  }

  function initLang(){
    let saved = null;
    try { saved = localStorage.getItem("mtls_lang"); } catch(e) {}

    // preferred browser language (your requirement)
    const browser = (navigator.language || "en").toLowerCase();
    const initial = saved || (browser.startsWith("fr") ? "fr" : "en");

    applyLang(initial);

    document.querySelectorAll(".lang-btn").forEach(btn=>{
      btn.addEventListener("click", ()=> applyLang(btn.dataset.lang));
    });
  }

  initLang();

  // Ultra-luxury: scroll reveal
  (function(){
    const els = Array.from(document.querySelectorAll('.reveal'));
    if (!('IntersectionObserver' in window) || !els.length){
      els.forEach(el=>el.classList.add('on'));
      return;
    }
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        if (e.isIntersecting){
          e.target.classList.add('on');
          io.unobserve(e.target);
        }
      });
    }, { threshold: 0.12 });
    els.forEach(el=>io.observe(el));
  })();

  // Mobile nav toggle
  (function(){
    const btn = document.querySelector(".menu-toggle");
    const overlay = document.querySelector(".nav-overlay");
    if(!btn || !overlay) return;

    function closeNav(){
      document.body.classList.remove("nav-open");
      btn.setAttribute("aria-expanded","false");
    }
    function openNav(){
      document.body.classList.add("nav-open");
      btn.setAttribute("aria-expanded","true");
    }
    btn.addEventListener("click", ()=>{
      document.body.classList.contains("nav-open") ? closeNav() : openNav();
    });
    overlay.addEventListener("click", closeNav);
    document.querySelectorAll(".links a").forEach(a=>{
      a.addEventListener("click", closeNav);
    });
  })();

  // Header v4: mobile drawer
  (function(){
    const btn = document.querySelector("header .menu-toggle");
    const overlay = document.querySelector("header .nav-overlay");
    const drawer = document.querySelector("header .drawer");
    if(!btn || !overlay || !drawer) return;

    function closeNav(){
      document.body.classList.remove("nav-open");
      btn.setAttribute("aria-expanded","false");
    }
    function openNav(){
      document.body.classList.add("nav-open");
      btn.setAttribute("aria-expanded","true");
    }

    btn.addEventListener("click", ()=>{
      document.body.classList.contains("nav-open") ? closeNav() : openNav();
    });
    overlay.addEventListener("click", closeNav);
    drawer.querySelectorAll("a").forEach(a=>a.addEventListener("click", closeNav));
  })();
</script>

<a class="float-book" href="booking.html" data-i18n="float_book" aria-label="Book online"><span class="mono">MT</span><span class="label" data-i18n="float_book">Book online</span></a>

</body>
</html>
